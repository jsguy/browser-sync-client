!function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n?n:e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e){return"undefined"==typeof e}function r(e,t){for(var n=0,o=t.split("."),r=o.length;r>n;n++){if(!e||"object"!=typeof e)return!1;e=e[o[n]]}return"undefined"==typeof e?!1:e}var i=e("./socket"),a=e("./emitter"),s=(e("./notify"),e("./tab"),e("./browser.utils")),u=function(e){this.options=e,this.socket=i,this.emitter=a,this.utils=s,this.tabHidden=!1;var t=this;i.on("options:set",function(e){a.emit("notify","Setting options..."),t.options=e.options}),a.on("tab:hidden",function(){t.tabHidden=!0}),a.on("tab:visible",function(){t.tabHidden=!1})};u.prototype.canSync=function(e,t){if(e=e||{},e.override)return!0;var n=!0;return t&&(n=this.getOption(t)),n&&e.url===window.location.pathname},u.prototype.getOption=function(e){if(e&&e.match(/\./))return r(this.options,e);var t=this.options[e];return o(t)?!1:t},t.exports=u},{"./browser.utils":2,"./emitter":5,"./notify":16,"./socket":17,"./tab":18}],2:[function(e,t,n){"use strict";var o=n;o.getWindow=function(){return window},o.getDocument=function(){return document},o.getBody=function(){return document.getElementsByTagName("body")[0]},o.getBrowserScrollPosition=function(){var e,t,o=n.getWindow(),r=n.getDocument(),i=r.documentElement,a=r.body;return void 0!==o.pageYOffset?(e=o.pageXOffset,t=o.pageYOffset):(e=i.scrollLeft||a.scrollLeft||0,t=i.scrollTop||a.scrollTop||0),{x:e,y:t}},o.getScrollSpace=function(){var e=n.getDocument(),t=e.documentElement,o=e.body;return{x:o.scrollHeight-t.clientWidth,y:o.scrollHeight-t.clientHeight}},o.saveScrollPosition=function(){var e=o.getBrowserScrollPosition();e=[e.x,e.y],o.getDocument.cookie="bs_scroll_pos="+e.join(",")},o.restoreScrollPosition=function(){var e=o.getDocument().cookie.replace(/(?:(?:^|.*;\s*)bs_scroll_pos\s*\=\s*([^;]*).*$)|^.*$/,"$1").split(",");o.getWindow().scrollTo(e[0],e[1])},o.getElementIndex=function(e,t){var n=o.getDocument().getElementsByTagName(e);return Array.prototype.indexOf.call(n,t)},o.forceChange=function(e){e.blur(),e.focus()},o.getXpath=function(e){var t=function(e){for(var t=[];e&&1==e.nodeType;e=e.parentNode){var n=0;if(e&&e.id){t.splice(0,0,'/*[@id="'+e.id+'"]');break}for(var o=e.previousSibling;o;o=o.previousSibling)o.nodeType!=Node.DOCUMENT_TYPE_NODE&&o.nodeName==e.nodeName&&++n;var r=e.nodeName.toLowerCase(),i="["+(n+1)+"]";t.splice(0,0,r+i)}return t.length?"/"+t.join("/"):null};return t(e)},o.getElementData=function(e){var t=e.tagName,n=o.getElementIndex(t,e),r=o.getXpath(e);return{tagName:t,index:n,xpath:r}},o.getSingleElement=function(e,t){var n=o.getDocument().getElementsByTagName(e);return n[t]},o.getBody=function(){return o.getDocument().getElementsByTagName("body")[0]},o.setScroll=function(e){o.getWindow().scrollTo(e.x,e.y)},o.reloadBrowser=function(){o.getWindow().location.reload(!0)},o.forEach=function(e,t){for(var n=0,o=e.length;o>n;n+=1)t(e[n],n,e)},o.isOldIe=function(){return"undefined"!=typeof o.getWindow().attachEvent}},{}],3:[function(e,t,n){"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),0>t&&(t+=this.length),0>t&&(t=0);for(var n=this.length;n>t;t+=1)if(t in this&&this[t]===e)return t;return-1})},{}],4:[function(e,t,n){"use strict";var o,r=e("./events"),i=e("./browser.utils"),a=e("./emitter"),s=n,u={tagNames:{css:"link",jpg:"img",jpeg:"img",png:"img",svg:"img",gif:"img",js:"script"},attrs:{link:"href",img:"src",script:"src"}},c="codeSync",l=function(){return window.location.pathname};s.init=function(e){e.options.tagNames&&(u.tagNames=e.options.tagNames),"window.name"===e.options.scrollRestoreTechnique?s.saveScrollInName(a):s.saveScrollInCookie(i.getWindow(),i.getDocument()),e.socket.on("file:reload",s.reload(e)),e.socket.on("browser:reload",function(){e.canSync({url:l()},c)&&s.reloadBrowser(!0,e)})},s.saveScrollInName=function(){var e="<<BS_START>>",t="<<BS_END>>",n=new RegExp(e+"(.+?)"+t),o=i.getWindow(),r={};a.on("browser:hardReload",function(n){var r=[o.name,e,JSON.stringify({bs:{hardReload:!0,scroll:n.scrollPosition}}),t].join("");o.name=r});try{var s=o.name.match(n);s&&(r=JSON.parse(s[1]))}catch(u){r={}}r.bs&&r.bs.hardReload&&r.bs.scroll&&i.setScroll(r.bs.scroll),o.name=o.name.replace(n,"")},s.saveScrollInCookie=function(e,t){i.isOldIe()&&("complete"===t.readyState?i.restoreScrollPosition():r.manager.addEvent(t,"readystatechange",function(){"complete"===t.readyState&&i.restoreScrollPosition()}),a.on("browser:hardReload",i.saveScrollPosition))},s.swapFile=function(e,t,n){var r=e[t],i=(new Date).getTime(),a="?rel="+i,u=s.getFilenameOnly(r);u&&(r=u[0]),n&&(n.timestamps||(a="")),e[t]=r+a;var c=document.body;return setTimeout(function(){o?(o.style.display="none",o.style.display="block"):(o=document.createElement("DIV"),c.appendChild(o))},200),{elem:e,timeStamp:i}},s.getFilenameOnly=function(e){return/^[^\?]+(?=\?)/.exec(e)},s.reload=function(e){return function(t){if(e.canSync({url:l()},c)){var n,o=e.options,r=e.emitter;if((t.url||!o.injectChanges)&&s.reloadBrowser(!0),t.basename&&t.ext){var i=s.getElems(t.ext),a=s.getMatches(i.elems,t.basename,i.attr);a.length&&o.notify&&r.emit("notify",{message:"Injected: "+t.basename});for(var u=0,f=a.length;f>u;u+=1)n=s.swapFile(a[u],i.attr,o)}return n}}},s.getTagName=function(e){return u.tagNames[e]},s.getAttr=function(e){return u.attrs[e]},s.getMatches=function(e,t,n){if("*"===t[0])return e;for(var o=[],r=0,i=e.length;i>r;r+=1)-1!==e[r][n].indexOf(t)&&o.push(e[r]);return o},s.getElems=function(e){var t=s.getTagName(e),n=s.getAttr(t);return{elems:document.getElementsByTagName(t),attr:n}},s.reloadBrowser=function(e){a.emit("browser:hardReload",{scrollPosition:i.getBrowserScrollPosition()}),e&&i.reloadBrowser()}},{"./browser.utils":2,"./emitter":5,"./events":6}],5:[function(e,t,n){"use strict";n.events={},n.emit=function(e,t){var o,r=n.events[e];if(r&&r.listeners){o=r.listeners;for(var i=0,a=o.length;a>i;i+=1)o[i](t)}},n.on=function(e,t){var o=n.events;o[e]?o[e].listeners.push(t):o[e]={listeners:[t]}}},{}],6:[function(e,t,n){n._ElementCache=function(){var e={},t=1,n="data"+(new Date).getTime();this.getData=function(o){var r=o[n];return r||(r=o[n]=t++,e[r]={}),e[r]},this.removeData=function(t){var o=t[n];if(o){delete e[o];try{delete t[n]}catch(r){t.removeAttribute&&t.removeAttribute(n)}}}},n._fixEvent=function(e){function t(){return!0}function n(){return!1}if(!e||!e.stopPropagation){var o=e||window.event;e={};for(var r in o)e[r]=o[r];if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){e.returnValue=!1,e.isDefaultPrevented=t},e.isDefaultPrevented=n,e.stopPropagation=function(){e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=t,this.stopPropagation()},e.isImmediatePropagationStopped=n,null!=e.clientX){var i=document.documentElement,a=document.body;e.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},n._EventManager=function(e){function t(t,n){function o(e){for(var t in e)return!1;return!0}var r=e.getData(t);0===r.handlers[n].length&&(delete r.handlers[n],document.removeEventListener?t.removeEventListener(n,r.dispatcher,!1):document.detachEvent&&t.detachEvent("on"+n,r.dispatcher)),o(r.handlers)&&(delete r.handlers,delete r.dispatcher),o(r)&&e.removeData(t)}var o=1;this.addEvent=function(t,r,i){var a=e.getData(t);a.handlers||(a.handlers={}),a.handlers[r]||(a.handlers[r]=[]),i.guid||(i.guid=o++),a.handlers[r].push(i),a.dispatcher||(a.disabled=!1,a.dispatcher=function(e){if(!a.disabled){e=n._fixEvent(e);var o=a.handlers[e.type];if(o)for(var r=0;r<o.length;r++)o[r].call(t,e)}}),1==a.handlers[r].length&&(document.addEventListener?t.addEventListener(r,a.dispatcher,!0):document.attachEvent&&t.attachEvent("on"+r,a.dispatcher))},this.removeEvent=function(n,o,r){var i=e.getData(n);if(i.handlers){var a=function(e){i.handlers[e]=[],t(n,e)};if(o){var s=i.handlers[o];if(s){if(!r)return void a(o);if(r.guid)for(var u=0;u<s.length;u++)s[u].guid===r.guid&&s.splice(u--,1);t(n,o)}}else for(var c in i.handlers)a(c)}},this.proxy=function(e,t){t.guid||(t.guid=o++);var n=function(){return t.apply(e,arguments)};return n.guid=t.guid,n}},n.triggerEvent=function(e,t){console.log("trigger",t,e);var n;window.setTimeout(function(){return document.createEventObject?(n=document.createEventObject(),n.cancelBubble=!0,e.fireEvent("on"+t,n)):(n=document.createEvent("click"===t.toLowerCase()?"MouseEvents":"HTMLEvents"),n.initEvent(t,!0,!0),!e.dispatchEvent(n))},0)};var o=new n._ElementCache,r=new n._EventManager(o);r.triggerEvent=n.triggerEvent,n.manager=r},{}],7:[function(e,t,n){"use strict";var o="click",r="ghostMode.clicks";n.canEmitEvents=!0,n.init=function(e,t){t.addEvent(document.body,o,n.browserEvent(e)),e.socket.on(o,n.socketEvent(e,t))},n.browserEvent=function(e){return function(t){if(n.canEmitEvents){var r=t.target||t.srcElement;if(console.log("clicked on",r),"checkbox"===r.type||"radio"===r.type)return void e.utils.forceChange(r);e.socket.emit(o,e.utils.getElementData(r))}else n.canEmitEvents=!0}},n.socketEvent=function(e,t){return function(o){if(!e.canSync(o,r)||e.tabHidden)return!1;console.log("data.xpath",o.xpath);var i=$(document.body).xpath(o.xpath).get(0);i&&(n.canEmitEvents=!1,console.log("event",i,"click"),t.triggerEvent(i,"click"))}},function(){function e(e,t){this.code=e,this.message=t||Hn[e]}function t(t){var n=t.match(/\$?(?:(?![0-9-])(?:[\w-]+|\*):)?(?![0-9-])(?:[\w-]+|\*)|\(:|:\)|\/\/|\.\.|::|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?|\.\d+(?:[eE][+-]?\d+)?|"[^"]*(?:""[^"]*)*"|'[^']*(?:''[^']*)*'|<<|>>|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g);if(n){for(var o=0,r=0,i=n.length;i>r;r++)"(:"==n[r]?o++:":)"==n[r]&&o?o--:o||/^\s/.test(n[r])||(this[this.length++]=n[r]);if(o)throw new e("XPST0003","Unclosed comment")}}function n(){}function o(e,t,o,r){this.staticContext=e,this.item=t,this.scope=o||{},this.stack={},this.DOMAdapter=r||new n;var i=new Rn,a=i.getTimezoneOffset();this.dateTime=new Je(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()+i.getMilliseconds()/1e3,-a),this.timezone=new Dt(0,Mn.abs(~~(a/60)),Mn.abs(a%60),0,a>0)}function r(){this.dataTypes={},this.documents={},this.functions={},this.collations={},this.collections={}}function i(e,t,n){$n[e]=n,Zn[e]=t}function a(e,t){Qn[e]=t}function s(n,o){var r=new t(n),i=f(r,o);if(!r.eof())throw new e("XPST0003","Unexpected token beyond end of query");if(!i)throw new e("XPST0003","Expected expression");this.internalExpression=i}function u(){}function c(){}function l(){this.items=[]}function f(t,n){var o;if(!t.eof()&&(o=p(t,n))){var r=new l;for(r.items.push(o);","==t.peek();){if(t.next(),t.eof()||!(o=p(t,n)))throw new e("XPST0003","Expected expression");r.items.push(o)}return r}}function p(e,t){return e.eof()?void 0:y(e,t)||d(e,t)||T(e,t)||Y(e,t)}function h(){this.bindings=[],this.returnExpr=null}function d(t,n){if("for"==t.peek()&&"$"==t.peek(1).substr(0,1)){t.next();var o,r=new h;do r.bindings.push(v(t,n));while(","==t.peek()&&t.next());if("return"!=t.peek())throw new e("XPST0003","Expected 'return' token in for expression");if(t.next(),t.eof()||!(o=p(t,n)))throw new e("XPST0003","Expected return statement operand in for expression");return r.returnExpr=o,r}}function m(e,t,n,o){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=o}function v(t,n){var o=t.peek().substr(1).match(uo);if(!o)throw new e("XPST0003","Expected binding in for expression");if("*"==o[1]||"*"==o[2])throw new e("XPST0003","Illegal use of wildcard in for expression binding variable name");if(t.next(),"in"!=t.peek())throw new e("XPST0003","Expected 'in' token in for expression binding");t.next();var r;if(t.eof()||!(r=p(t,n)))throw new e("XPST0003","Expected in statement operand in for expression binding");return new m(o[1]||null,o[2],o[1]?n.getURIForPrefix(o[1]):null,r)}function w(e,t,n){this.condExpr=e,this.thenExpr=t,this.elseExpr=n}function y(t,n){var o,r,i;if("if"==t.peek()&&"("==t.peek(1)){if(t.next(2),t.eof()||!(o=f(t,n)))throw new e("XPST0003","Expected if statement operand in conditional expression");if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in for expression");if(t.next(),"then"!=t.peek())throw new e("XPST0003","Expected 'then' token in conditional if expression");if(t.next(),t.eof()||!(r=p(t,n)))throw new e("XPST0003","Expected then statement operand in condional expression");if("else"!=t.peek())throw new e("XPST0003","Expected 'else' token in conditional if expression");if(t.next(),t.eof()||!(i=p(t,n)))throw new e("XPST0003","Expected else statement operand in condional expression");return new w(o,r,i)}}function g(e){this.quantifier=e,this.bindings=[],this.satisfiesExpr=null}function T(t,n){var o=t.peek();if(("some"==o||"every"==o)&&"$"==t.peek(1).substr(0,1)){t.next();var r,i=new g(o);do i.bindings.push(E(t,n));while(","==t.peek()&&t.next());if("satisfies"!=t.peek())throw new e("XPST0003","Expected 'satisfies' token in quantified expression");if(t.next(),t.eof()||!(r=p(t,n)))throw new e("XPST0003","Expected satisfies statement operand in quantified expression");return i.satisfiesExpr=r,i}}function x(e,t,n,o){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=o}function E(t,n){var o=t.peek().substr(1).match(uo);if(!o)throw new e("XPST0003","Expected binding in quantified expression");if("*"==o[1]||"*"==o[2])throw new e("XPST0003","Illegal use of wildcard in quantified expression binding variable name");if(t.next(),"in"!=t.peek())throw new e("XPST0003","Expected 'in' token in quantified expression binding");t.next();var r;if(t.eof()||!(r=p(t,n)))throw new e("XPST0003","Expected in statement operand in quantified expression binding");return new x(o[1]||null,o[2],o[1]?n.getURIForPrefix(o[1]):null,r)}function I(e,t,n){this.left=e,this.right=t,this.operator=n}function b(t,n){var o,r;if(!t.eof()&&(o=be(t,n))){if(!(t.peek()in no))return o;var i=t.peek();if(t.next(),t.eof()||!(r=be(t,n)))throw new e("XPST0003","Expected second operand in comparison expression");return new I(o,r,i)}}function N(e,t){var n=xn(e.left.evaluate(t),t);if(!n.length)return new $e(!1);var o=xn(e.right.evaluate(t),t);if(!o.length)return new $e(!1);for(var r,i,a=!1,s=0,u=n.length;u>s&&!a;s++)for(var c,l,f=0,p=o.length;p>f&&!a;f++)i=n[s],l=o[f],r=i instanceof It,c=l instanceof It,r&&c?(i=Tt.cast(i),l=Tt.cast(l)):(r?l instanceof Dt?i=Dt.cast(i):l instanceof bt?i=bt.cast(i):l.primitiveKind&&(i=Qn[l.primitiveKind].cast(i)):c&&(i instanceof Dt?l=Dt.cast(l):i instanceof bt?l=bt.cast(l):i.primitiveKind&&(l=Qn[i.primitiveKind].cast(l))),i instanceof He&&(i=Tt.cast(i)),l instanceof He&&(l=Tt.cast(l))),a=eo[Jn[e.operator]](i,l,t).valueOf();return new $e(a)}function D(e,t){var n=xn(e.left.evaluate(t),t);if(!n.length)return null;Te(t,n,"?","first operand of '"+e.operator+"'");var o=xn(e.right.evaluate(t),t);if(!o.length)return null;Te(t,o,"?","second operand of '"+e.operator+"'");var r=n[0],i=o[0];return r instanceof It&&(r=Tt.cast(r)),i instanceof It&&(i=Tt.cast(i)),r instanceof He&&(r=Tt.cast(r)),i instanceof He&&(i=Tt.cast(i)),eo[e.operator](r,i,t)}function O(e,t){var n=e.left.evaluate(t);if(!n.length)return null;Te(t,n,"?","first operand of '"+e.operator+"'"),ge(t,n,Zt,"first operand of '"+e.operator+"'");var o=e.right.evaluate(t);return o.length?(Te(t,o,"?","second operand of '"+e.operator+"'"),ge(t,o,Zt,"second operand of '"+e.operator+"'"),to[e.operator](n[0],o[0],t)):null}function P(e){this.left=e,this.items=[]}function S(t,n){var o;if(!t.eof()&&(o=k(t,n))){if(!(t.peek()in oo))return o;for(var r,i=new P(o);(r=t.peek())in oo;){if(t.next(),t.eof()||!(o=k(t,n)))throw new e("XPST0003","Expected second operand in additive expression");i.items.push([r,o])}return i}}function R(e){this.left=e,this.items=[]}function k(t,n){var o;if(!t.eof()&&(o=De(t,n))){if(!(t.peek()in ro))return o;for(var r,i=new R(o);(r=t.peek())in ro;){if(t.next(),t.eof()||!(o=De(t,n)))throw new e("XPST0003","Expected second operand in multiplicative expression");i.items.push([r,o])}return i}}function M(e,t){this.operator=e,this.expression=t}function A(t,n){if(!t.eof()){if(!(t.peek()in io))return _(t,n);for(var o,r="+";t.peek()in io;)"-"==t.peek()&&(r="-"==r?"+":"-"),t.next();if(t.eof()||!(o=_(t,n)))throw new e("XPST0003","Expected operand in unary expression");return new M(r,o)}}function _(e,t){return H(e,t)}function X(e){this.left=e,this.items=[]}function Y(t,n){var o;if(!t.eof()&&(o=z(t,n))){if("or"!=t.peek())return o;for(var r=new X(o);"or"==t.peek();){if(t.next(),t.eof()||!(o=z(t,n)))throw new e("XPST0003","Expected second operand in logical expression");r.items.push(o)}return r}}function U(e){this.left=e,this.items=[]}function z(t,n){var o;if(!t.eof()&&(o=b(t,n))){if("and"!=t.peek())return o;for(var r=new U(o);"and"==t.peek();){if(t.next(),t.eof()||!(o=b(t,n)))throw new e("XPST0003","Expected second operand in logical expression");r.items.push(o)}return r}}function C(){}function F(e,t){return e.eof()?void 0:he(e,t)||K(e,t)}function G(t,n,o){for(var r;"["==t.peek();){if(t.next(),t.eof()||!(r=f(t,n)))throw new e("XPST0003","Expected expression in predicate");if(o.predicates.push(r),"]"!=t.peek())throw new e("XPST0003","Expected ']' token in predicate");t.next()}}function q(e,t){this.axis=e,this.test=t,this.predicates=[]}function K(t,n){var o,r,i=t.peek();if("::"==t.peek(1)){if(!(i in ao))throw new e("XPST0003","Unknown axis name: "+i);if(t.next(2),t.eof()||!(o=$(t,n)))throw new e("XPST0003","Expected node test expression in axis step");r=new q(i,o)}else if(".."==i)t.next(),r=new q("parent",new Z("node"));else if("@"==i){if(t.next(),t.eof()||!(o=$(t,n)))throw new e("XPST0003","Expected node test expression in axis step");r=new q("attribute",o)}else{if(t.eof()||!(o=$(t,n)))return;r=new q(o instanceof Z&&"attribute"==o.name?"attribute":"child",o)}return G(t,n,r),r}function B(e,t,n){for(var o;e;e=n(e,"nextSibling"))t.push(e),(o=n(e,"firstChild"))&&B(o,t,n)}function V(e,t,n){for(var o;e;e=n(e,"previousSibling"))(o=n(e,"lastChild"))&&V(o,t,n),t.push(e)}function L(){this.items=[]}function H(t,n){if(!t.eof()){var o,r="/",i="//",a=new L,s=t.peek();if((s==i||s==r)&&(t.next(),a.items.push(new ve(null,"root",Bn)),s==i&&a.items.push(new q("descendant-or-self",new Z("node")))),!t.eof()&&(o=F(t,n))){for(a.items.push(o);(s=t.peek())==r||s==i;){if(s==i&&a.items.push(new q("descendant-or-self",new Z("node"))),t.next(),t.eof()||!(o=F(t,n)))throw new e("XPST0003","Expected path step expression");a.items.push(o)}return 1==a.items.length?a.items[0]:a}if(s==r)return a.items[0];if(s==i)throw new e("XPST0003","Expected path step expression")}}function j(){}function $(e,t){return e.eof()?void 0:Q(e,t)||J(e,t)}function Z(e){this.name=e,this.args=[]}function Q(t,n){var o=t.peek();if("("==t.peek(1)){if(!(o in so))throw new e("XPST0003","Unknown '"+o+"' kind test");t.next(2);var r=new Z(o);if(")"!=t.peek());else{if("schema-attribute"==o)throw new e("XPST0003","Expected attribute declaration in 'schema-attribute' kind test");if("schema-element"==o)throw new e("XPST0003","Expected element declaration in 'schema-element' kind test")}if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in kind test");return t.next(),r}}function W(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function J(t,n){var o=t.peek().match(uo);if(o){if("*"==o[1]&&"*"==o[2])throw new e("XPST0003","Illegal use of *:* wildcard in name test");return t.next(),new W(o[1]||null,o[2],o[1]?"*"==o[1]?"*":n.getURIForPrefix(o[1])||null:n.defaultElementNamespace)}}function ee(e,t){return e.eof()?void 0:re(e,t)||ne(e,t)||we(e,t)||me(e,t)||ae(e,t)}function te(e){this.expression=e}function ne(t,n){if("("==t.peek()){t.next();var o=null;if(")"!=t.peek()&&(o=f(t,n)),")"!=t.peek())throw new e("XPST0003","Expected ')' token in parenthesized expression");return t.next(),new te(o)}}function oe(){}function re(e,t){return"."==e.peek()?(e.next(),new oe):void 0}function ie(){}function ae(e,t){return e.eof()?void 0:ue(e,t)||fe(e,t)}function se(e){this.value=e}function ue(e,t){var n=e.peek(),o=ce(n);return o?(e.next(),new se(o)):void 0}function ce(e){var t=e.match(co);if(t){var n=Pt;return t[5]?n=at:(t[2]||t[3])&&(n=it),new n(+e)}}function le(e){this.value=e}function fe(e,t){var n=e.peek().match(lo);return n?(e.next(),new le(new Tt(n[1]?n[1].replace("''","'"):n[2]?n[2].replace('""','"'):""))):void 0}function pe(e){this.expression=e,this.predicates=[]}function he(e,t){var n;if(!e.eof()&&(n=ee(e,t))){var o=new pe(n);return G(e,t,o),0==o.predicates.length?o.expression:o}}function de(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function me(t,n){if("$"==t.peek().substr(0,1)){var o=t.peek().substr(1).match(uo);if(o){if("*"==o[1]||"*"==o[2])throw new e("XPST0003","Illegal use of wildcard in var expression variable name");var r=new de(o[1]||null,o[2],o[1]?n.getURIForPrefix(o[1]):null);return t.next(),r}}}function ve(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n,this.args=[]}function we(t,n){var o=t.peek().match(uo);if(o&&"("==t.peek(1)){if(!o[1]&&o[2]in so)return K(t,n);if("*"==o[1]||"*"==o[2])throw new e("XPST0003","Illegal use of wildcard in function name");var r,i=new ve(o[1]||null,o[2],o[1]?n.getURIForPrefix(o[1])||null:n.defaultFunctionNamespace);if(t.next(2),")"!=t.peek()){do{if(t.eof()||!(r=p(t,n)))throw new e("XPST0003","Expected function call argument");i.args.push(r)}while(","==t.peek()&&t.next());if(")"!=t.peek())throw new e("XPST0003","Expected ')' token in function call")}return t.next(),i}}function ye(t,n,o,r,i){for(var a,s,u=r.length,c=n.length,l=0;l<n.length&&!n[l][2];)l++;if(u>c)throw new e("XPST0017","Function "+t+"() must have "+(c?" no more than ":"")+c+" argument"+(c>1||!c?"s":""));if(l>u)throw new e("XPST0017","Function "+t+"() must have "+(l==c?"exactly":"at least")+" "+l+" argument"+(c>1?"s":""));for(var f=0;u>f;f++)s=n[f],a=r[f],Te(i,a,s[1],fo[f]+" argument of "+t+"()"),ge(i,a,s[0],fo[f]+" argument of "+t+"()"),"+"!=s[1]&&"*"!=s[1]&&(r[f]=a.length?a[0]:null)}function ge(t,n,o,r){for(var i,a,s=0,u=n.length;u>s;s++)if(a=n[s],o==Zt||o.prototype instanceof Zt){if(!t.DOMAdapter.isNode(a))throw new e("XPTY0004","Required item type of "+r+" is "+o);if(o!=Zt&&(i=t.DOMAdapter.getProperty(a,"nodeType"),[null,en,Qt,nn,nn,null,null,tn,Wt,Jt,null,null,null][i]!=o))throw new e("XPTY0004","Required item type of "+r+" is "+o)}else if(o==Ve||o.prototype instanceof Ve){if(a=xn([a],t)[0],o!=Ve&&(a instanceof It?a=o.cast(a):o==Tt?a instanceof He&&(a=Tt.cast(a)):o==at&&Le(a)&&(a=o.cast(a))),!(a instanceof o))throw new e("XPTY0004","Required item type of "+r+" is "+o);n[s]=a}}function Te(t,n,o,r){var i=n.length;if("?"==o){if(i>1)throw new e("XPTY0004","Required cardinality of "+r+" is one or zero")}else if("+"==o){if(1>i)throw new e("XPTY0004","Required cardinality of "+r+" is one or more")}else if("*"!=o&&1!=i)throw new e("XPTY0004","Required cardinality of "+r+" is exactly one")}function xe(e){this.left=e,this.items=[]}function Ee(t,n){var o,r;if(!t.eof()&&(o=Pe(t,n))){if("intersect"!=(r=t.peek())&&"except"!=r)return o;for(var i=new xe(o);"intersect"==(r=t.peek())||"except"==r;){if(t.next(),t.eof()||!(o=Pe(t,n)))throw new e("XPST0003","Expected second operand in "+r+" expression");i.items.push([r,o])}return i}}function Ie(e,t){this.left=e,this.right=t}function be(t,n){var o,r;if(!t.eof()&&(o=S(t,n))){if("to"!=t.peek())return o;if(t.next(),t.eof()||!(r=S(t,n)))throw new e("XPST0003","Expected second operand in range expression");return new Ie(o,r)}}function Ne(e){this.left=e,this.items=[]}function De(t,n){var o,r;if(!t.eof()&&(o=Ee(t,n))){if("|"!=(r=t.peek())&&"union"!=r)return o;for(var i=new Ne(o);"|"==(r=t.peek())||"union"==r;){if(t.next(),t.eof()||!(o=Ee(t,n)))throw new e("XPST0003","Expected second operand in union expression");i.items.push(o)}return i}}function Oe(e,t){this.expression=e,this.type=t}function Pe(t,n){var o,r;if(!t.eof()&&(o=Re(t,n))){if("instance"!=t.peek()||"of"!=t.peek(1))return o;if(t.next(2),t.eof()||!(r=Fe(t,n)))throw new e("XPST0003","Expected second operand in instance of expression");return new Oe(o,r)}}function Se(e,t){this.expression=e,this.type=t}function Re(t,n){var o,r;if(!t.eof()&&(o=Me(t,n))){if("treat"!=t.peek()||"as"!=t.peek(1))return o;if(t.next(2),t.eof()||!(r=Fe(t,n)))throw new e("XPST0003","Expected second operand in treat expression");return new Se(o,r)}}function ke(e,t){this.expression=e,this.type=t}function Me(t,n){var o,r;if(!t.eof()&&(o=_e(t,n))){if("castable"!=t.peek()||"as"!=t.peek(1))return o;if(t.next(2),t.eof()||!(r=qe(t,n)))throw new e("XPST0003","Expected second operand in castable expression");return new ke(o,r)}}function Ae(e,t){this.expression=e,this.type=t}function _e(t,n){var o,r;if(!t.eof()&&(o=A(t,n))){if("cast"!=t.peek()||"as"!=t.peek(1))return o;if(t.next(2),t.eof()||!(r=qe(t,n)))throw new e("XPST0003","Expected second operand in cast expression");return new Ae(o,r)}}function Xe(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function Ye(t,n){var o=t.peek().match(uo);if(o){if("*"==o[1]||"*"==o[2])throw new e("XPST0003","Illegal use of wildcard in type name");return t.next(),new Xe(o[1]||null,o[2],o[1]?n.getURIForPrefix(o[1]):null)}}function Ue(e){this.test=e}function ze(t,n){if(!t.eof()){var o;if("item"==t.peek()&&"("==t.peek(1)){if(t.next(2),")"!=t.peek())throw new e("XPST0003","Expected ')' token in item type expression");return t.next(),new Ue}return(o=Q(t,n))?new Ue(o):(o=Ye(t,n))?new Ue(o):void 0}}function Ce(e,t){this.itemType=e||null,this.occurence=t||null}function Fe(t,n){if(!t.eof()){if("empty-sequence"==t.peek()&&"("==t.peek(1)){if(t.next(2),")"!=t.peek())throw new e("XPST0003","Expected ')' token in sequence type");return t.next(),new Ce}var o,r;return!t.eof()&&(o=ze(t,n))?(r=t.peek(),"?"==r||"*"==r||"+"==r?t.next():r=null,new Ce(o,r)):void 0}}function Ge(e,t){this.itemType=e||null,this.occurence=t||null}function qe(e,t){var n,o;return!e.eof()&&(n=Ye(e,t))?(o=e.peek(),"?"==o?e.next():o=null,new Ge(n,o)):void 0}function Ke(){}function Be(){}function Ve(){}function Le(e){return e instanceof ft||e instanceof at||e instanceof it}function He(e,t,n,o,r){this.scheme=e,this.authority=t,this.path=n,this.query=o,this.fragment=r}function je(e){this.value=e}function $e(e){this.value=e}function Ze(e,t,n,o,r){this.year=e,this.month=t,this.day=n,this.timezone=o,this.negative=r}function Qe(e,t){return 2==t&&(e%400==0||e%100!=0&&e%4==0)?29:wo[t-1]}function We(e,t){if(!t){var n=Qe(e.year,e.month);if(e.day>n)for(;e.day>n;)e.month+=1,e.month>12&&(e.year+=1,0==e.year&&(e.year=1),e.month=1),e.day-=n,n=Qe(e.year,e.month);else if(e.day<1)for(;e.day<1;)e.month-=1,e.month<1&&(e.year-=1,0==e.year&&(e.year=-1),e.month=12),n=Qe(e.year,e.month),e.day+=n}return e.month>12?(e.year+=~~(e.month/12),0==e.year&&(e.year=1),e.month=e.month%12):e.month<1&&(e.year+=~~(e.month/12)-1,0==e.year&&(e.year=-1),e.month=e.month%12+12),e}function Je(e,t,n,o,r,i,a,s){this.year=e,this.month=t,this.day=n,this.hours=o,this.minutes=r,this.seconds=i,this.timezone=a,this.negative=s}function et(e,t){var n=Dn(e);return arguments.length<2&&(t=2),(n.length<t+1?new Pn(t+1-n.length).join("0"):"")+n}function tt(e){var t=e.timezone;return null==t?"":t?(t>0?"+":"-")+et(Mn.abs(~~(t/60)))+":"+et(Mn.abs(t%60)):"Z"}function nt(e){return(e.negative?"-":"")+et(e.year,4)+"-"+et(e.month)+"-"+et(e.day)}function ot(e){var t=Dn(e.seconds).split(".");return et(e.hours)+":"+et(e.minutes)+":"+et(t[0])+(t.length>1?"."+t[1]:"")}function rt(e){return We(Et(e))}function it(e){this.value=e}function at(e){this.value=e}function st(e,t,n,o,r,i,a){this.year=e,this.month=t,this.day=n,this.hours=o,this.minutes=r,this.seconds=i,this.negative=a}function ut(e){return(e.year?e.year+"Y":"")+(e.month?e.month+"M":"")}function ct(e){return(e.day?e.day+"D":"")+(e.hours||e.minutes||e.seconds?"T"+(e.hours?e.hours+"H":"")+(e.minutes?e.minutes+"M":"")+(e.seconds?e.seconds+"S":""):"")}function lt(e){return Nt(Ot(e))}function ft(e){this.value=e}function pt(e,t){this.day=e,this.timezone=t}function ht(e,t){this.month=e,this.timezone=t}function dt(e,t,n){this.month=e,this.day=t,this.timezone=n}function mt(e,t){this.year=e,this.timezone=t}function vt(e,t,n){this.year=e,this.month=t,this.timezone=n}function wt(e){this.value=e}function yt(){}function gt(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}function Tt(e){this.value=e}function xt(e,t,n,o){this.hours=e,this.minutes=t,this.seconds=n,this.timezone=o}function Et(e){return(e.seconds>=60||e.seconds<0)&&(e.minutes+=~~(e.seconds/60)-(e.seconds<0&&e.seconds%60?1:0),e.seconds=e.seconds%60+(e.seconds<0&&e.seconds%60?60:0)),(e.minutes>=60||e.minutes<0)&&(e.hours+=~~(e.minutes/60)-(e.minutes<0&&e.minutes%60?1:0),e.minutes=e.minutes%60+(e.minutes<0&&e.minutes%60?60:0)),(e.hours>=24||e.hours<0)&&(e instanceof Je&&(e.day+=~~(e.hours/24)-(e.hours<0&&e.hours%24?1:0)),e.hours=e.hours%24+(e.hours<0&&e.hours%24?24:0)),e}function It(e){this.value=e}function bt(e,t,n){st.call(this,e,t,0,0,0,0,n)}function Nt(e){return e.month>=12&&(e.year+=~~(e.month/12),e.month%=12),e}function Dt(e,t,n,o,r){st.call(this,0,0,e,t,n,o,r)}function Ot(e){return e.seconds>=60&&(e.minutes+=~~(e.seconds/60),e.seconds%=60),e.minutes>=60&&(e.hours+=~~(e.minutes/60),e.minutes%=60),e.hours>=24&&(e.day+=~~(e.hours/24),e.hours%=24),e}function Pt(e){this.value=e}function St(e){this.value=e}function Rt(e){this.value=e}function kt(e){this.value=e}function Mt(e){this.value=e}function At(e){this.value=e}function _t(e){this.value=e}function Xt(e){this.value=e}function Yt(e){this.value=e}function Ut(e){this.value=e}function zt(e){this.value=e}function Ct(e){this.value=e}function Ft(e){this.value=e}function Gt(e){this.value=e}function qt(e){this.value=e}function Kt(e){this.value=e}function Bt(e){this.value=e}function Vt(e){this.value=e}function Lt(e){this.value=e}function Ht(e){this.value=e}function jt(e){this.value=e}function $t(){}function Zt(){}function Qt(){}function Wt(){}function Jt(){}function en(){}function tn(){}function nn(){}function on(e,t,n){var o=hn(e),r=hn(t);return new $e("lt"==n?r>o:"gt"==n?o>r:o==r)}function rn(e,t,n){return an(Je.cast(e),Je.cast(t),n)}function an(e,t,n){var o=new Dt(0,0,0,0),r=gn(e,o).toString(),i=gn(t,o).toString();return new $e("lt"==n?i>r:"gt"==n?r>i:r==i)}function sn(e,t,n){var o;e instanceof Ze?o=new Ze(e.year,e.month,e.day,e.timezone,e.negative):e instanceof Je&&(o=new Je(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative)),o.year=o.year+t.year*("-"==n?-1:1),o.month=o.month+t.month*("-"==n?-1:1),We(o,!0);var r=Qe(o.year,o.month);return o.day>r&&(o.day=r),o}function un(e,t,n){var o;if(e instanceof Ze){var r=60*(60*t.hours+t.minutes)+t.seconds;o=new Ze(e.year,e.month,e.day,e.timezone,e.negative),o.day=o.day+t.day*("-"==n?-1:1)-1*(r&&"-"==n),We(o)}else e instanceof Je&&(o=new Je(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),o.seconds=o.seconds+t.seconds*("-"==n?-1:1),o.minutes=o.minutes+t.minutes*("-"==n?-1:1),o.hours=o.hours+t.hours*("-"==n?-1:1),o.day=o.day+t.day*("-"==n?-1:1),rt(o));return o}function cn(e){return(60*(60*(24*e.day+e.hours)+e.minutes)+e.seconds)*(e.negative?-1:1)}function ln(e){var t=(e=Mn.round(e))<0,n=~~((e=Mn.abs(e))/86400),o=~~((e-=3600*n*24)/3600),r=~~((e-=3600*o)/60),i=e-=60*r;return new Dt(n,o,r,i,t)}function fn(e){return(12*e.year+e.month)*(e.negative?-1:1)}function pn(e){
var t=(e=Mn.round(e))<0,n=~~((e=Mn.abs(e))/12),o=e-=12*n;return new bt(n,o,t)}function hn(e){return e.seconds+60*(e.minutes-(null!=e.timezone?e.timezone%60:0)+60*(e.hours-(null!=e.timezone?~~(e.timezone/60):0)))}function dn(e){var t=new Rn((e.negative?-1:1)*e.year,e.month,e.day,0,0,0,0);return e instanceof Je&&(t.setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds)),null!=e.timezone&&t.setMinutes(t.getMinutes()-e.timezone),t.getTime()/1e3}function mn(e,t){if(_n(e)||Mn.abs(e)==Un||_n(t)||Mn.abs(t)==Un)return 0;var n=Dn(e).match(co),o=Dn(t).match(co),r=Mn.max(1,(n[2]||n[3]||"").length+(n[5]||0)*("+"==n[4]?-1:1),(o[2]||o[3]||"").length+(o[5]||0)*("+"==o[4]?-1:1));return r+(r%2?0:1)}function vn(e,t,n){return new(e instanceof Pt&&t instanceof Pt&&n==Mn.round(n)?Pt:it)(n)}function wn(e,t){if(null==e)return null;var n=e[t]*(e.negative?-1:1);return"seconds"==t?new it(n):new Pt(n)}function yn(e,t){if(null==e)return null;if("timezone"==t){var n=e.timezone;return null==n?null:new Dt(0,Mn.abs(~~(n/60)),Mn.abs(n%60),0,0>n)}var o=e[t];return e instanceof Ze||"hours"==t&&24==o&&(o=0),e instanceof xt||(o*=e.negative?-1:1),"seconds"==t?new it(o):new Pt(o)}function gn(e,t){if(null==e)return null;var n;if(n=e instanceof Ze?new Ze(e.year,e.month,e.day,e.timezone,e.negative):e instanceof xt?new xt(e.hours,e.minutes,e.seconds,e.timezone,e.negative):new Je(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),null==t)n.timezone=null;else{var o=cn(t)/60;if(null!=e.timezone){var r=o-e.timezone;e instanceof Ze?0>r&&n.day--:(n.minutes+=r%60,n.hours+=~~(r/60)),rt(n)}n.timezone=o}return n}function Tn(t,n){if(!t.length)return!1;var o=t[0];if(n.DOMAdapter.isNode(o))return!0;if(1==t.length){if(o instanceof $e)return o.value.valueOf();if(o instanceof Tt)return!!o.valueOf().length;if(Le(o))return!(_n(o.valueOf())||0==o.valueOf());throw new e("FORG0006","Effective boolean value is defined only for sequences containing booleans, strings, numbers, URIs, or nodes")}throw new e("FORG0006","Effective boolean value is not defined for a sequence of two or more items")}function xn(e,t){for(var n,o,r=[],i=0,a=e.length;a>i;i++){if(n=e[i],o=null,null==n)o=null;else if(t.DOMAdapter.isNode(n)){var s=t.DOMAdapter.getProperty;switch(s(n,"nodeType")){case 1:o=new It(s(n,"textContent"));break;case 2:o=new It(s(n,"value"));break;case 3:case 4:case 8:o=new It(s(n,"data"));break;case 7:o=new It(s(n,"data"));break;case 9:var u=s(n,"documentElement");o=new It(u?s(u,"textContent"):"")}}else n instanceof Ve&&(o=n);null!=o&&r.push(o)}return r}function En(e,t){return e.sort(function(e,n){var o=t.DOMAdapter.compareDocumentPosition(e,n);return 2&o?1:4&o?-1:0})}function In(t,n){var o="À-ÖØ-öø-˿",r="Ͱ-ͽͿ-῿‌-‍",i="⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�",a="A-Z_a-z\\-.0-9·"+o+"̀-ͯ"+r+"‿-⁀"+i,s="A-Z_a-z"+o+r+i;if(t=t.replace(/\[\\i-\[:\]\]/g,"["+s+"]").replace(/\[\\c-\[:\]\]/g,"["+a+"]").replace(/\\i/g,"[:"+s+"]").replace(/\\I/g,"[^:"+s+"]").replace(/\\c/g,"[:"+a+"]").replace(/\\C/g,"[^:"+a+"]"),n&&!n.match(/^[smix]+$/))throw new e("FORX0001");var u=n.indexOf("s")>=0,c=n.indexOf("x")>=0;if(u||c){n=n.replace(/[sx]/g,"");for(var l,f=[],p=/\s/,h=0,d=t.length,m=!1,v="";d>h;h++)l=t.charAt(h),"\\"!=v&&("["==l?m=!0:"]"==l&&(m=!1)),!m&&c&&p.test(l)||(!m&&u&&"."==l&&"\\"!=v?f[f.length]="(?:.|\\s)":f[f.length]=l),v=l;t=f.join("")}return new Sn(t,n+"g")}function bn(){}function Nn(e,t,n){("undefined"==typeof t||null===t)&&(t="");var i=e[0];"undefined"==typeof i&&(i=null);var a=i&&"DIV"==(9==i.nodeType?i:i.ownerDocument).createElement("div").tagName?Vo:Lo;a.namespaceResolver=n;var u=new s(Dn(t),a);a.namespaceResolver=null;var c,l=new Go,f=Uo;Ko?f=a==Vo?Co:Fo:Bo&&a==Vo&&(f=zo),c=u.evaluate(new o(a,i,null,f));for(var p,h=0,d=c.length;d>h;h++)l.push(f.isNode(p=c[h])?p:r.xs2js(p));return l}var Dn=window.String,On=(window.Boolean,window.Number),Pn=(window.Object,window.Array),Sn=window.RegExp,Rn=window.Date,kn=window.Function,Mn=window.Math,An=window.Error,_n=(window.SyntaxError,window.TypeError,window.isNaN),Xn=window.isFinite,Yn=window.NaN,Un=window.Infinity,zn=window.btoa,Cn=window.atob,Fn=window.parseInt,Gn=function(){return Dn.prototype.trim?function(e){return Dn(e).trim()}:function(e){return Dn(e).replace(/^\s+|\s+$/g,"")}}(),qn=function(){return Pn.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,o=e.length;o>n;n++)if(e[n]===t)return n;return-1}}(),Kn="http://www.w3.org/2001/XMLSchema",Bn="http://www.w3.org/2005/xpath-functions",Vn="http://www.w3.org/2000/xmlns/",Ln="http://www.w3.org/XML/1998/namespace";e.prototype=new An;var Hn={};Hn.XPDY0002="Evaluation of an expression relies on some part of the dynamic context that has not been assigned a value.",Hn.XPST0003="Expression is not a valid instance of the grammar",Hn.XPTY0004="Type is not appropriate for the context in which the expression occurs",Hn.XPST0008="Expression refers to an element name, attribute name, schema type name, namespace prefix, or variable name that is not defined in the static context",Hn.XPST0010="Axis not supported",Hn.XPST0017="Expanded QName and number of arguments in a function call do not match the name and arity of a function signature",Hn.XPTY0018="The result of the last step in a path expression contains both nodes and atomic values",Hn.XPTY0019="The result of a step (other than the last step) in a path expression contains an atomic value.",Hn.XPTY0020="In an axis step, the context item is not a node.",Hn.XPST0051="It is a static error if a QName that is used as an AtomicType in a SequenceType is not defined in the in-scope schema types as an atomic type.",Hn.XPST0081="A QName used in an expression contains a namespace prefix that cannot be expanded into a namespace URI by using the statically known namespaces.",Hn.FORG0001="Invalid value for cast/constructor.",Hn.FORG0003="fn:zero-or-one called with a sequence containing more than one item.",Hn.FORG0004="fn:one-or-more called with a sequence containing no items.",Hn.FORG0005="fn:exactly-one called with a sequence containing zero or more than one item.",Hn.FORG0006="Invalid argument type.",Hn.FODC0001="No context document.",Hn.FORX0001="Invalid regular expression flags.",Hn.FOCA0002="Invalid lexical value.",Hn.FOCH0002="Unsupported collation.",Hn.FONS0004="No namespace found for prefix.",t.prototype.index=0,t.prototype.length=0,t.prototype.reset=function(){this.index=0},t.prototype.peek=function(e){return this[this.index+(e||0)]||""},t.prototype.next=function(e){return(this.index+=e||1)<this.length},t.prototype.back=function(e){return(this.index-=e||1)>0},t.prototype.eof=function(){return this.index>=this.length},n.prototype.isNode=function(e){return e&&!!e.nodeType},n.prototype.getProperty=function(e,t){return e[t]},n.prototype.isSameNode=function(e,t){return e==t},n.prototype.compareDocumentPosition=function(e,t){return e.compareDocumentPosition(t)},n.prototype.lookupNamespaceURI=function(e,t){return e.lookupNamespaceURI(t)},n.prototype.getElementById=function(e,t){return e.getElementById(t)},n.prototype.getElementsByTagNameNS=function(e,t,n){return e.getElementsByTagNameNS(t,n)},o.prototype.item=null,o.prototype.position=0,o.prototype.size=0,o.prototype.scope=null,o.prototype.stack=null,o.prototype.dateTime=null,o.prototype.timezone=null,o.prototype.staticContext=null,o.prototype.pushVariable=function(e,t){this.stack.hasOwnProperty(e)||(this.stack[e]=[]),this.stack[e].push(this.scope[e]),this.scope[e]=t},o.prototype.popVariable=function(e){this.stack.hasOwnProperty(e)&&(this.scope[e]=this.stack[e].pop(),this.stack[e].length||(delete this.stack[e],"undefined"==typeof this.scope[e]&&delete this.scope[e]))},r.prototype.baseURI=null,r.prototype.dataTypes=null,r.prototype.documents=null,r.prototype.functions=null,r.prototype.defaultFunctionNamespace=null,r.prototype.collations=null,r.prototype.defaultCollationName=Bn+"/collation/codepoint",r.prototype.collections=null,r.prototype.namespaceResolver=null,r.prototype.defaultElementNamespace=null;var jn=/^(?:\{([^\}]+)\})?(.+)$/;r.prototype.setDataType=function(e,t){var n=e.match(jn);n&&n[1]!=Kn&&(this.dataTypes[e]=t)},r.prototype.getDataType=function(e){var t=e.match(jn);return t?t[1]==Kn?Qn[Sn.$2]:this.dataTypes[e]:void 0},r.prototype.setDocument=function(e,t){this.documents[e]=t},r.prototype.setFunction=function(e,t){var n=e.match(jn);n&&n[1]!=Bn&&(this.functions[e]=t)},r.prototype.getFunction=function(e){var t=e.match(jn);return t?t[1]==Bn?$n[Sn.$2]:this.functions[e]:void 0},r.prototype.setCollation=function(e,t){this.collations[e]=t},r.prototype.getCollation=function(e){return this.collations[e]},r.prototype.setCollection=function(e,t){this.collections[e]=t},r.prototype.getURIForPrefix=function(t){var n,o=this.namespaceResolver,r=o&&o.lookupNamespaceURI?o.lookupNamespaceURI:o;if(r instanceof kn&&(n=r.call(o,t)))return n;if("fn"==t)return Bn;if("xs"==t)return Kn;if("xml"==t)return Ln;if("xmlns"==t)return Vn;throw new e("XPST0081","Prefix '"+t+"' has not been declared")},r.js2xs=function(e){return e="boolean"==typeof e?new $e(e):"number"==typeof e?_n(e)||!Xn(e)?new at(e):ce(Dn(e)):new Tt(Dn(e))},r.xs2js=function(e){return e=e instanceof $e?e.valueOf():Le(e)?e.valueOf():e.toString()};var $n={},Zn={},Qn={},Wn={};s.prototype.internalExpression=null,s.prototype.evaluate=function(e){return this.internalExpression.evaluate(e)},u.prototype.equals=function(e,t){throw"Not implemented"},u.prototype.compare=function(e,t){throw"Not implemented"},c.ANYSIMPLETYPE_DT=1,c.STRING_DT=2,c.BOOLEAN_DT=3,c.DECIMAL_DT=4,c.FLOAT_DT=5,c.DOUBLE_DT=6,c.DURATION_DT=7,c.DATETIME_DT=8,c.TIME_DT=9,c.DATE_DT=10,c.GYEARMONTH_DT=11,c.GYEAR_DT=12,c.GMONTHDAY_DT=13,c.GDAY_DT=14,c.GMONTH_DT=15,c.HEXBINARY_DT=16,c.BASE64BINARY_DT=17,c.ANYURI_DT=18,c.QNAME_DT=19,c.NOTATION_DT=20,c.NORMALIZEDSTRING_DT=21,c.TOKEN_DT=22,c.LANGUAGE_DT=23,c.NMTOKEN_DT=24,c.NAME_DT=25,c.NCNAME_DT=26,c.ID_DT=27,c.IDREF_DT=28,c.ENTITY_DT=29,c.INTEGER_DT=30,c.NONPOSITIVEINTEGER_DT=31,c.NEGATIVEINTEGER_DT=32,c.LONG_DT=33,c.INT_DT=34,c.SHORT_DT=35,c.BYTE_DT=36,c.NONNEGATIVEINTEGER_DT=37,c.UNSIGNEDLONG_DT=38,c.UNSIGNEDINT_DT=39,c.UNSIGNEDSHORT_DT=40,c.UNSIGNEDBYTE_DT=41,c.POSITIVEINTEGER_DT=42,c.LISTOFUNION_DT=43,c.LIST_DT=44,c.UNAVAILABLE_DT=45,c.DATETIMESTAMP_DT=46,c.DAYMONTHDURATION_DT=47,c.DAYTIMEDURATION_DT=48,c.PRECISIONDECIMAL_DT=49,c.ANYATOMICTYPE_DT=50,c.ANYTYPE_DT=51,c.XT_YEARMONTHDURATION_DT=-1,c.XT_UNTYPEDATOMIC_DT=-2,l.prototype.items=null,l.prototype.evaluate=function(e){for(var t=[],n=0,o=this.items.length;o>n;n++)t=Wn.concatenate.call(e,t,this.items[n].evaluate(e));return t},h.prototype.bindings=null,h.prototype.returnExpr=null,h.prototype.evaluate=function(e){var t=[];return function(n,o){for(var r=n.bindings[o++],i=r.inExpr.evaluate(e),a=(r.namespaceURI?"{"+r.namespaceURI+"}":"")+r.localName,s=0,u=i.length;u>s;s++)e.pushVariable(a,i[s]),o<n.bindings.length?arguments.callee(n,o):t=t.concat(n.returnExpr.evaluate(e)),e.popVariable(a)}(this,0),t},m.prototype.prefix=null,m.prototype.localName=null,m.prototype.namespaceURI=null,m.prototype.inExpr=null,w.prototype.condExpr=null,w.prototype.thenExpr=null,w.prototype.elseExpr=null,w.prototype.evaluate=function(e){return this[Tn(this.condExpr.evaluate(e),e)?"thenExpr":"elseExpr"].evaluate(e)},g.prototype.bindings=null,g.prototype.quantifier=null,g.prototype.satisfiesExpr=null,g.prototype.evaluate=function(e){var t="every"==this.quantifier,n=t?!0:!1;return function(o,r){for(var i=o.bindings[r++],a=i.inExpr.evaluate(e),s=(i.namespaceURI?"{"+i.namespaceURI+"}":"")+i.localName,u=0,c=a.length;c>u&&(t?n:!n);u++)e.pushVariable(s,a[u]),r<o.bindings.length?arguments.callee(o,r):n=Tn(o.satisfiesExpr.evaluate(e),e),e.popVariable(s)}(this,0),[new $e(n)]},x.prototype.prefix=null,x.prototype.localName=null,x.prototype.namespaceURI=null,x.prototype.inExpr=null,I.prototype.left=null,I.prototype.right=null,I.prototype.operator=null,I.prototype.evaluate=function(e){var t=no[this.operator](this,e);return null==t?[]:[t]};var Jn={"=":"eq","!=":"ne",">":"gt","<":"lt",">=":"ge","<=":"le"},eo={};eo.eq=function(t,n,o){var r="";if(Le(t))Le(n)&&(r="numeric-equal");else if(t instanceof $e)n instanceof $e&&(r="boolean-equal");else if(t instanceof Tt){if(n instanceof Tt)return Wn["numeric-equal"].call(o,$n.compare.call(o,t,n),new Pt(0))}else t instanceof Ze?n instanceof Ze&&(r="date-equal"):t instanceof xt?n instanceof xt&&(r="time-equal"):t instanceof Je?n instanceof Je&&(r="dateTime-equal"):t instanceof st?n instanceof st&&(r="duration-equal"):t instanceof vt?n instanceof vt&&(r="gYearMonth-equal"):t instanceof mt?n instanceof mt&&(r="gYear-equal"):t instanceof dt?n instanceof dt&&(r="gMonthDay-equal"):t instanceof ht?n instanceof ht&&(r="gMonth-equal"):t instanceof pt?n instanceof pt&&(r="gDay-equal"):t instanceof gt?n instanceof gt&&(r="QName-equal"):t instanceof wt?n instanceof wt&&(r="hexBinary-equal"):t instanceof je&&n instanceof je&&(r="base64Binary-equal");if(r)return Wn[r].call(o,t,n);throw new e("XPTY0004","Cannot compare values of given types")},eo.ne=function(e,t,n){return new $e(!eo.eq(e,t,n).valueOf())},eo.gt=function(t,n,o){var r="";if(Le(t))Le(n)&&(r="numeric-greater-than");else if(t instanceof $e)n instanceof $e&&(r="boolean-greater-than");else if(t instanceof Tt){if(n instanceof Tt)return Wn["numeric-greater-than"].call(o,$n.compare.call(o,t,n),new Pt(0))}else t instanceof Ze?n instanceof Ze&&(r="date-greater-than"):t instanceof xt?n instanceof xt&&(r="time-greater-than"):t instanceof Je?n instanceof Je&&(r="dateTime-greater-than"):t instanceof bt?n instanceof bt&&(r="yearMonthDuration-greater-than"):t instanceof Dt&&n instanceof Dt&&(r="dayTimeDuration-greater-than");if(r)return Wn[r].call(o,t,n);throw new e("XPTY0004","Cannot compare values of given types")},eo.lt=function(t,n,o){var r="";if(Le(t))Le(n)&&(r="numeric-less-than");else if(t instanceof $e)n instanceof $e&&(r="boolean-less-than");else if(t instanceof Tt){if(n instanceof Tt)return Wn["numeric-less-than"].call(o,$n.compare.call(o,t,n),new Pt(0))}else t instanceof Ze?n instanceof Ze&&(r="date-less-than"):t instanceof xt?n instanceof xt&&(r="time-less-than"):t instanceof Je?n instanceof Je&&(r="dateTime-less-than"):t instanceof bt?n instanceof bt&&(r="yearMonthDuration-less-than"):t instanceof Dt&&n instanceof Dt&&(r="dayTimeDuration-less-than");if(r)return Wn[r].call(o,t,n);throw new e("XPTY0004","Cannot compare values of given types")},eo.ge=function(t,n,o){var r="";if(Le(t))Le(n)&&(r="numeric-less-than");else if(t instanceof $e)n instanceof $e&&(r="boolean-less-than");else if(t instanceof Tt){if(n instanceof Tt)return Wn["numeric-greater-than"].call(o,$n.compare.call(o,t,n),new Pt(-1))}else t instanceof Ze?n instanceof Ze&&(r="date-less-than"):t instanceof xt?n instanceof xt&&(r="time-less-than"):t instanceof Je?n instanceof Je&&(r="dateTime-less-than"):t instanceof bt?n instanceof bt&&(r="yearMonthDuration-less-than"):t instanceof Dt&&n instanceof Dt&&(r="dayTimeDuration-less-than");if(r)return new $e(!Wn[r].call(o,t,n).valueOf());throw new e("XPTY0004","Cannot compare values of given types")},eo.le=function(t,n,o){var r="";if(Le(t))Le(n)&&(r="numeric-greater-than");else if(t instanceof $e)n instanceof $e&&(r="boolean-greater-than");else if(t instanceof Tt){if(n instanceof Tt)return Wn["numeric-less-than"].call(o,$n.compare.call(o,t,n),new Pt(1))}else t instanceof Ze?n instanceof Ze&&(r="date-greater-than"):t instanceof xt?n instanceof xt&&(r="time-greater-than"):t instanceof Je?n instanceof Je&&(r="dateTime-greater-than"):t instanceof bt?n instanceof bt&&(r="yearMonthDuration-greater-than"):t instanceof Dt&&n instanceof Dt&&(r="dayTimeDuration-greater-than");if(r)return new $e(!Wn[r].call(o,t,n).valueOf());throw new e("XPTY0004","Cannot compare values of given types")};var to={};to.is=function(e,t,n){return Wn["is-same-node"].call(n,e,t)},to[">>"]=function(e,t,n){return Wn["node-after"].call(n,e,t)},to["<<"]=function(e,t,n){return Wn["node-before"].call(n,e,t)};var no={"=":N,"!=":N,"<":N,"<=":N,">":N,">=":N,eq:D,ne:D,lt:D,le:D,gt:D,ge:D,is:O,">>":O,"<<":O};P.prototype.left=null,P.prototype.items=null;var oo={};oo["+"]=function(t,n,o){var r="",i=!1;if(Le(t)?Le(n)&&(r="numeric-add"):t instanceof Ze?n instanceof bt?r="add-yearMonthDuration-to-date":n instanceof Dt&&(r="add-dayTimeDuration-to-date"):t instanceof bt?n instanceof Ze?(r="add-yearMonthDuration-to-date",i=!0):n instanceof Je?(r="add-yearMonthDuration-to-dateTime",i=!0):n instanceof bt&&(r="add-yearMonthDurations"):t instanceof Dt?n instanceof Ze?(r="add-dayTimeDuration-to-date",i=!0):n instanceof xt?(r="add-dayTimeDuration-to-time",i=!0):n instanceof Je?(r="add-dayTimeDuration-to-dateTime",i=!0):n instanceof Dt&&(r="add-dayTimeDurations"):t instanceof xt?n instanceof Dt&&(r="add-dayTimeDuration-to-time"):t instanceof Je&&(n instanceof bt?r="add-yearMonthDuration-to-dateTime":n instanceof Dt&&(r="add-dayTimeDuration-to-dateTime")),r)return Wn[r].call(o,i?n:t,i?t:n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},oo["-"]=function(t,n,o){var r="";if(Le(t)?Le(n)&&(r="numeric-subtract"):t instanceof Ze?n instanceof Ze?r="subtract-dates":n instanceof bt?r="subtract-yearMonthDuration-from-date":n instanceof Dt&&(r="subtract-dayTimeDuration-from-date"):t instanceof xt?n instanceof xt?r="subtract-times":n instanceof Dt&&(r="subtract-dayTimeDuration-from-time"):t instanceof Je?n instanceof Je?r="subtract-dateTimes":n instanceof bt?r="subtract-yearMonthDuration-from-dateTime":n instanceof Dt&&(r="subtract-dayTimeDuration-from-dateTime"):t instanceof bt?n instanceof bt&&(r="subtract-yearMonthDurations"):t instanceof Dt&&n instanceof Dt&&(r="subtract-dayTimeDurations"),r)return Wn[r].call(o,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},P.prototype.evaluate=function(e){var t=xn(this.left.evaluate(e),e);if(!t.length)return[];Te(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof It&&(n=at.cast(n));for(var o,r,i=0,a=this.items.length;a>i;i++){if(o=xn(this.items[i][1].evaluate(e),e),!o.length)return[];Te(e,o,"?","first operand of '"+this.items[i][0]+"'"),r=o[0],r instanceof It&&(r=at.cast(r)),n=oo[this.items[i][0]](n,r,e)}return[n]},R.prototype.left=null,R.prototype.items=null;var ro={};ro["*"]=function(t,n,o){var r="",i=!1;if(Le(t)?Le(n)?r="numeric-multiply":n instanceof bt?(r="multiply-yearMonthDuration",i=!0):n instanceof Dt&&(r="multiply-dayTimeDuration",i=!0):t instanceof bt?Le(n)&&(r="multiply-yearMonthDuration"):t instanceof Dt&&Le(n)&&(r="multiply-dayTimeDuration"),r)return Wn[r].call(o,i?n:t,i?t:n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ro.div=function(t,n,o){var r="";if(Le(t)?Le(n)&&(r="numeric-divide"):t instanceof bt?Le(n)?r="divide-yearMonthDuration":n instanceof bt&&(r="divide-yearMonthDuration-by-yearMonthDuration"):t instanceof Dt&&(Le(n)?r="divide-dayTimeDuration":n instanceof Dt&&(r="divide-dayTimeDuration-by-dayTimeDuration")),r)return Wn[r].call(o,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ro.idiv=function(t,n,o){if(Le(t)&&Le(n))return Wn["numeric-integer-divide"].call(o,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},ro.mod=function(t,n,o){if(Le(t)&&Le(n))return Wn["numeric-mod"].call(o,t,n);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},R.prototype.evaluate=function(e){var t=xn(this.left.evaluate(e),e);if(!t.length)return[];Te(e,t,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof It&&(n=at.cast(n));for(var o,r,i=0,a=this.items.length;a>i;i++){if(o=xn(this.items[i][1].evaluate(e),e),!o.length)return[];Te(e,o,"?","second operand of '"+this.items[i][0]+"'"),r=o[0],r instanceof It&&(r=at.cast(r)),n=ro[this.items[i][0]](n,r,e)}return[n]},M.prototype.operator=null,M.prototype.expression=null;var io={};io["-"]=function(t,n){if(Le(t))return Wn["numeric-unary-minus"].call(n,t);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},io["+"]=function(t,n){if(Le(t))return Wn["numeric-unary-plus"].call(n,t);throw new e("XPTY0004","Arithmetic operator is not defined for provided arguments")},M.prototype.evaluate=function(e){var t=xn(this.expression.evaluate(e),e);if(!t.length)return[];Te(e,t,"?","second operand of '"+this.operator+"'");var n=t[0];return n instanceof It&&(n=at.cast(n)),[io[this.operator](n,e)]},X.prototype.left=null,X.prototype.items=null,X.prototype.evaluate=function(e){for(var t=Tn(this.left.evaluate(e),e),n=0,o=this.items.length;o>n&&!t;n++)t=Tn(this.items[n].evaluate(e),e);return[new $e(t)]},U.prototype.left=null,U.prototype.items=null,U.prototype.evaluate=function(e){for(var t=Tn(this.left.evaluate(e),e),n=0,o=this.items.length;o>n&&t;n++)t=Tn(this.items[n].evaluate(e),e);return[new $e(t)]},C.prototype.predicates=null,C.prototype.applyPredicates=function(e,t){for(var n,o=t.item,r=t.position,i=t.size,a=0,s=this.predicates.length;s>a;a++){n=e,e=[];for(var u,c=0,l=n.length;l>c;c++)t.item=n[c],t.position=c+1,t.size=l,u=this.predicates[a].evaluate(t),1==u.length&&Le(u[0])?u[0].valueOf()==c+1&&e.push(n[c]):Tn(u,t)&&e.push(n[c])}return t.item=o,t.position=r,t.size=i,e},q.prototype=new C,q.prototype.axis=null,q.prototype.test=null;var ao={};ao.attribute={},ao.child={},ao.descendant={},ao["descendant-or-self"]={},ao.following={},ao["following-sibling"]={},ao.self={},ao.ancestor={},ao["ancestor-or-self"]={},ao.parent={},ao.preceding={},ao["preceding-sibling"]={},q.prototype.evaluate=function(t){var n=t.item;if(!t.DOMAdapter.isNode(n))throw new e("XPTY0020");var o=[],r=t.DOMAdapter.getProperty,i=r(n,"nodeType");switch(this.axis){case"attribute":if(1==i)for(var a=r(n,"attributes"),s=0,u=a.length;u>s;s++)o.push(a[s]);break;case"child":for(var c=r(n,"firstChild");c;c=r(c,"nextSibling"))o.push(c);break;case"descendant-or-self":o.push(n);case"descendant":B(r(n,"firstChild"),o,r);break;case"following":for(var l,f=n;f;f=r(f,"parentNode"))(l=r(f,"nextSibling"))&&B(l,o,r);break;case"following-sibling":for(var c=n;c=r(c,"nextSibling");)o.push(c);break;case"self":o.push(n);break;case"ancestor-or-self":o.push(n);case"ancestor":for(var c=2==i?r(n,"ownerElement"):n;c=r(c,"parentNode");)o.push(c);break;case"parent":var f=2==i?r(n,"ownerElement"):r(n,"parentNode");f&&o.push(f);break;case"preceding":for(var l,f=n;f;f=r(f,"parentNode"))(l=r(f,"previousSibling"))&&V(l,o,r);break;case"preceding-sibling":for(var c=n;c=r(c,"previousSibling");)o.push(c)}if(o.length&&!(this.test instanceof Z&&"node"==this.test.name)){var p=o;o=[];for(var s=0,u=p.length;u>s;s++)this.test.test(p[s],t)&&o.push(p[s])}switch(o.length&&this.predicates.length&&(o=this.applyPredicates(o,t)),this.axis){case"ancestor":case"ancestor-or-self":case"parent":case"preceding":case"preceding-sibling":o.reverse()}return o},L.prototype.items=null,L.prototype.evaluate=function(t){for(var n,o=t.item,r=[o],i=0,a=this.items.length;a>i;i++){n=[];for(var s=0,u=r.length;u>s;s++){t.item=r[s];for(var c=0,l=this.items[i].evaluate(t),f=l.length;f>c;c++){if(a-1>i&&!t.DOMAdapter.isNode(l[c]))throw new e("XPTY0019");-1==qn(n,l[c])&&n.push(l[c])}}r=n}return t.item=o,En(r,t)},Z.prototype=new j,Z.prototype.name=null,Z.prototype.args=null;var so={};so["document-node"]={},so.element={},so.attribute={},so["processing-instruction"]={},so.comment={},so.text={},so.node={},so["schema-element"]={},so["schema-attribute"]={},Z.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,o=t.DOMAdapter.isNode(e)?n(e,"nodeType"):0;switch(this.name){case"node":return!!o;case"attribute":if(2!=o)return!1;break;case"document-node":return 9==o;case"element":return 1==o;case"processing-instruction":if(7!=o)return!1;break;case"comment":return 8==o;case"text":return 3==o||4==o;case"schema-attribute":throw"KindTest 'schema-attribute' not implemented";case"schema-element":throw"KindTest 'schema-element' not implemented"}return 2==o?"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"):7==o?"xml"!=n(e,"target"):!0},W.prototype=new j,W.prototype.prefix=null,W.prototype.localName=null,W.prototype.namespaceURI=null;var uo=/^(?:(?![0-9-])([\w-]+|\*)\:)?(?![0-9-])([\w-]+|\*)$/;W.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,o=n(e,"nodeType");if(1==o||2==o){if("*"==this.localName)return(1==o||"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"))&&(!this.prefix||n(e,"namespaceURI")==this.namespaceURI);if(this.localName==n(e,"localName"))return"*"==this.namespaceURI||2==o&&!this.prefix&&!n(e,"prefix")||n(e,"namespaceURI")==this.namespaceURI}return!1},te.prototype.evaluate=function(e){return this.expression?this.expression.evaluate(e):[]},oe.prototype.evaluate=function(t){if(null==t.item)throw new e("XPDY0002","Dynamic context does not have context item initialized");return[t.item]},ie.prototype.value=null,ie.prototype.evaluate=function(e){return[this.value]},se.prototype=new ie;var co=/^[+\-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;le.prototype=new ie;var lo=/^'([^']*(?:''[^']*)*)'|"([^"]*(?:""[^"]*)*)"$/;pe.prototype=new C,pe.prototype.expression=null,pe.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.predicates.length&&t.length&&(t=this.applyPredicates(t,e)),t},de.prototype.prefix=null,de.prototype.localName=null,de.prototype.namespaceURI=null,de.prototype.evaluate=function(t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(t.scope.hasOwnProperty(n))return[t.scope[n]];throw new e("XPST0008","Variable $"+(this.prefix?this.prefix+":":"")+this.localName+" has not been declared")},ve.prototype.prefix=null,ve.prototype.localName=null,ve.prototype.namespaceURI=null,ve.prototype.args=null,ve.prototype.evaluate=function(t){for(var n,o,r=[],i=0,a=this.args.length;a>i;i++)r.push(this.args[i].evaluate(t));var s=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(this.namespaceURI==Bn){if(o=$n[this.localName]){(n=Zn[this.localName])&&ye(this.localName,n,o,r,t);var u=o.apply(t,r);return null==u?[]:u instanceof Pn?u:[u]}throw new e("XPST0017","Unknown system function: "+s+"()")}if(this.namespaceURI==Kn){if((o=Qn[this.localName])&&"NOTATION"!=this.localName&&"anyAtomicType"!=this.localName)return ye(this.localName,[[Ve]],o,r,t),[o.cast(r[0])];throw new e("XPST0017","Unknown type constructor function: "+s+"()")}if(o=t.staticContext.getFunction(s)){var u=o.apply(t,r);return null==u?[]:u instanceof Pn?u:[u]}throw new e("XPST0017","Unknown user function: "+s+"()")};var fo=["first","second","third","fourth","fifth"];xe.prototype.left=null,xe.prototype.items=null,xe.prototype.evaluate=function(e){for(var t,n=this.left.evaluate(e),o=0,r=this.items.length;r>o;o++)n=Wn[(t=this.items[o])[0]].call(e,n,t[1].evaluate(e));return n},Ie.prototype.left=null,Ie.prototype.right=null,Ie.prototype.evaluate=function(e){var t=this.left.evaluate(e);if(!t.length)return[];var n="first operand of 'to'";Te(e,t,"?",n),ge(e,t,Pt,n);var o=this.right.evaluate(e);return o.length?(n="second operand of 'to'",Te(e,o,"?",n),ge(e,o,Pt,n),Wn.to.call(e,t[0],o[0])):[]},Ne.prototype.left=null,Ne.prototype.items=null,Ne.prototype.evaluate=function(e){for(var t=this.left.evaluate(e),n=0,o=this.items.length;o>n;n++)t=Wn.union.call(e,t,this.items[n].evaluate(e));return t},Oe.prototype.expression=null,Oe.prototype.type=null,Oe.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,o=this.type.occurence;if(!n)return[new $e(!t.length)];if(!t.length)return[new $e("?"==o||"*"==o)];if(1!=t.length&&"+"!=o&&"*"!=o)return[new $e(!1)];if(!n.test)return[new $e(!0)];for(var r=!0,i=0,a=t.length;a>i&&r;i++)r=n.test.test(t[i],e);return[new $e(r)]},Se.prototype.expression=null,Se.prototype.type=null,Se.prototype.evaluate=function(t){var n=this.expression.evaluate(t),o=this.type.itemType,r=this.type.occurence;if(!o){if(n.length)throw new e("XPDY0050","The only value allowed for the value in 'treat as' expression is an empty sequence");return n}if("?"!=r&&"*"!=r&&!n.length)throw new e("XPDY0050","An empty sequence is not allowed as the value in 'treat as' expression");if("+"!=r&&"*"!=r&&1!=n.length)throw new e("XPDY0050","A sequence of more than one item is not allowed as the value in 'treat as' expression");if(!o.test)return n;for(var i=0,a=n.length;a>i;i++)if(!o.test.test(n[i],t))throw new e("XPDY0050","Required item type of value in 'treat as' expression is "+(o.test.prefix?o.test.prefix+":":"")+o.test.localName);return n},ke.prototype.expression=null,ke.prototype.type=null,ke.prototype.evaluate=function(t){var n=this.expression.evaluate(t),o=this.type.itemType,r=this.type.occurence;if(n.length>1)return[new $e(!1)];if(!n.length)return[new $e("?"==r)];try{o.cast(xn(n,t)[0])}catch(i){if("XPST0051"==i.code)throw i;if("XPST0017"==i.code)throw new e("XPST0080","No value is castable to "+(o.prefix?o.prefix+":":"")+o.localName);return[new $e(!1)]}return[new $e(!0)]},Ae.prototype.expression=null,Ae.prototype.type=null,Ae.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return Te(e,t,this.type.occurence,"'cast as' expression operand"),t.length?[this.type.itemType.cast(xn(t,e)[0],e)]:[]},Xe.prototype.prefix=null,Xe.prototype.localName=null,Xe.prototype.namespaceURI=null,Xe.prototype.test=function(t,n){var o=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,r=this.namespaceURI==Kn?Qn[this.localName]:n.staticContext.getDataType(o);if(r)return t instanceof r;throw new e("XPST0051","Unknown simple type "+(this.prefix?this.prefix+":":"")+this.localName)},Xe.prototype.cast=function(t,n){var o=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,r=this.namespaceURI==Kn?Qn[this.localName]:n.staticContext.getDataType(o);if(r)return r.cast(t);throw new e("XPST0051","Unknown atomic type "+(this.prefix?this.prefix+":":"")+this.localName)},Ue.prototype.test=null,Ce.prototype.itemType=null,Ce.prototype.occurence=null,Ge.prototype.itemType=null,Ge.prototype.occurence=null,Ke.prototype.builtInKind=c.ANYTYPE_DT,Be.prototype=new Ke,Be.prototype.builtInKind=c.ANYSIMPLETYPE_DT,Be.prototype.primitiveKind=null,Be.PRIMITIVE_ANYURI="anyURI",Be.PRIMITIVE_BASE64BINARY="base64Binary",Be.PRIMITIVE_BOOLEAN="boolean",Be.PRIMITIVE_DATE="date",Be.PRIMITIVE_DATETIME="dateTime",Be.PRIMITIVE_DECIMAL="decimal",Be.PRIMITIVE_DOUBLE="double",Be.PRIMITIVE_DURATION="duration",Be.PRIMITIVE_FLOAT="float",Be.PRIMITIVE_GDAY="gDay",Be.PRIMITIVE_GMONTH="gMonth",Be.PRIMITIVE_GMONTHDAY="gMonthDay",Be.PRIMITIVE_GYEAR="gYear",Be.PRIMITIVE_GYEARMONTH="gYearMonth",Be.PRIMITIVE_HEXBINARY="hexBinary",Be.PRIMITIVE_NOTATION="NOTATION",Be.PRIMITIVE_QNAME="QName",Be.PRIMITIVE_STRING="string",Be.PRIMITIVE_TIME="time",Ve.prototype=new Be,Ve.prototype.builtInKind=c.ANYATOMICTYPE_DT,Ve.cast=function(t){throw new e("XPST0017","Abstract type used in constructor function xs:anyAtomicType")},a("anyAtomicType",Ve),He.prototype=new Ve,He.prototype.builtInKind=c.ANYURI_DT,He.prototype.primitiveKind=Be.PRIMITIVE_ANYURI,He.prototype.scheme=null,He.prototype.authority=null,He.prototype.path=null,He.prototype.query=null,He.prototype.fragment=null,He.prototype.toString=function(){return(this.scheme?this.scheme+":":"")+(this.authority?"//"+this.authority:"")+(this.path?this.path:"")+(this.query?"?"+this.query:"")+(this.fragment?"#"+this.fragment:"")};var po=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;He.cast=function(t){if(t instanceof He)return t;if(t instanceof Tt||t instanceof It){var n;if(n=Gn(t).match(po))return new He(n[2],n[4],n[5],n[7],n[9]);throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:anyURI can never succeed")},a("anyURI",He),je.prototype=new Ve,je.prototype.builtInKind=c.BASE64BINARY_DT,je.prototype.primitiveKind=Be.PRIMITIVE_BASE64BINARY,je.prototype.value=null,je.prototype.valueOf=function(){return this.value},je.prototype.toString=function(){return this.value};var ho=/^((([A-Za-z0-9+\/]\s*){4})*(([A-Za-z0-9+\/]\s*){3}[A-Za-z0-9+\/]|([A-Za-z0-9+\/]\s*){2}[AEIMQUYcgkosw048]\s*=|[A-Za-z0-9+\/]\s*[AQgw]\s*=\s*=))?$/;
je.cast=function(t){if(t instanceof je)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(ho);if(n)return new je(n[0]);throw new e("FORG0001")}if(t instanceof wt){for(var n=t.valueOf().match(/.{2}/g),o=[],r=0,i=n.length;i>r;r++)o.push(Dn.fromCharCode(Fn(n[r],16)));return new je(zn(o.join("")))}throw new e("XPTY0004","Casting value '"+t+"' to xs:hexBinary can never succeed")},a("base64Binary",je),$e.prototype=new Ve,$e.prototype.builtInKind=c.BOOLEAN_DT,$e.prototype.primitiveKind=Be.PRIMITIVE_BOOLEAN,$e.prototype.value=null,$e.prototype.valueOf=function(){return this.value},$e.prototype.toString=function(){return Dn(this.value)};var mo=/^(0|1|true|false)$/;$e.cast=function(t){if(t instanceof $e)return t;if(t instanceof Tt||t instanceof It){var n;if(n=Gn(t).match(mo))return new $e("1"==n[1]||"true"==n[1]);throw new e("FORG0001")}if(Le(t))return new $e(0!=t);throw new e("XPTY0004","Casting value '"+t+"' to xs:boolean can never succeed")},a("boolean",$e),Ze.prototype=new Ve,Ze.prototype.builtInKind=c.DATE_DT,Ze.prototype.primitiveKind=Be.PRIMITIVE_DATE,Ze.prototype.year=null,Ze.prototype.month=null,Ze.prototype.day=null,Ze.prototype.timezone=null,Ze.prototype.negative=null,Ze.prototype.toString=function(){return nt(this)+tt(this)};var vo=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Ze.cast=function(t){if(t instanceof Ze)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(vo);if(n){var o=+n[2],r=+n[3],i=+n[4];if(i-1<Qe(o,r))return new Ze(o,r,i,n[5]?"Z"==n[5]?0:("-"==n[6]?-1:1)*(60*n[7]+1*n[8]):null,"-"==n[1]);throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Je)return new Ze(t.year,t.month,t.day,t.timezone,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:date can never succeed")};var wo=[31,28,31,30,31,30,31,31,30,31,30,31];a("date",Ze),Je.prototype=new Ve,Je.prototype.builtInKind=c.DATETIME_DT,Je.prototype.primitiveKind=Be.PRIMITIVE_DATETIME,Je.prototype.year=null,Je.prototype.month=null,Je.prototype.day=null,Je.prototype.hours=null,Je.prototype.minutes=null,Je.prototype.seconds=null,Je.prototype.timezone=null,Je.prototype.negative=null,Je.prototype.toString=function(){return nt(this)+"T"+ot(this)+tt(this)};var yo=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])T(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;Je.cast=function(t){if(t instanceof Je)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(yo);if(n){var o=+n[2],r=+n[3],i=+n[4],a=!!n[10];if(i-1<Qe(o,r))return rt(new Je(o,r,i,a?24:+n[6],a?0:+n[7],On((a?0:n[8])+"."+(a?0:n[9]||0)),n[12]?"Z"==n[12]?0:("-"==n[13]?-1:1)*(60*n[14]+1*n[15]):null,"-"==n[1]));throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Ze)return new Je(t.year,t.month,t.day,0,0,0,t.timezone,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:dateTime can never succeed")},a("dateTime",Je),it.prototype=new Ve,it.prototype.builtInKind=c.DECIMAL_DT,it.prototype.primitiveKind=Be.PRIMITIVE_DECIMAL,it.prototype.value=null,it.prototype.valueOf=function(){return this.value},it.prototype.toString=function(){return Dn(this.value)};var go=/^[+\-]?((\d+(\.\d*)?)|(\.\d+))$/;it.cast=function(t){if(t instanceof it)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(go);if(n)return new it(+t);throw new e("FORG0001")}if(t instanceof $e)return new it(1*t);if(Le(t)){if(_n(t)||!Xn(t))throw new e("FOCA0002","Cannot convert '"+t+"' to xs:decimal");return new it(+t)}throw new e("XPTY0004","Casting value '"+t+"' to xs:decimal can never succeed")},a("decimal",it),at.prototype=new Ve,at.prototype.builtInKind=c.DOUBLE_DT,at.prototype.primitiveKind=Be.PRIMITIVE_DOUBLE,at.prototype.value=null,at.prototype.valueOf=function(){return this.value},at.prototype.toString=function(){return Dn(this.value)};var To=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;at.cast=function(t){if(t instanceof at)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(To);if(n)return new at(n[7]?+n[7].replace("INF","Infinity"):+t);throw new e("FORG0001")}if(t instanceof $e)return new at(1*t);if(Le(t))return new at(t.value);throw new e("XPTY0004","Casting value '"+t+"' to xs:double can never succeed")},a("double",at),st.prototype=new Ve,st.prototype.builtInKind=c.DURATION_DT,st.prototype.primitiveKind=Be.PRIMITIVE_DURATION,st.prototype.year=null,st.prototype.month=null,st.prototype.day=null,st.prototype.hours=null,st.prototype.minutes=null,st.prototype.seconds=null,st.prototype.negative=null,st.prototype.toString=function(){return(this.negative?"-":"")+"P"+(ut(this)+ct(this)||"T0S")};var xo=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;st.cast=function(t){if(t instanceof bt)return new st(t.year,t.month,0,0,0,0,t.negative);if(t instanceof Dt)return new st(0,0,t.day,t.hours,t.minutes,t.seconds,t.negative);if(t instanceof st)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(xo);if(n)return lt(new st(+n[2]||0,+n[3]||0,+n[4]||0,+n[5]||0,+n[6]||0,+n[7]||0,"-"==n[1]));throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:duration can never succeed")},a("duration",st),ft.prototype=new Ve,ft.prototype.builtInKind=c.FLOAT_DT,ft.prototype.primitiveKind=Be.PRIMITIVE_FLOAT,ft.prototype.value=null,ft.prototype.valueOf=function(){return this.value},ft.prototype.toString=function(){return Dn(this.value)};var Eo=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;ft.cast=function(t){if(t instanceof ft)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Eo);if(n)return new ft(n[7]?+n[7].replace("INF","Infinity"):+t);throw new e("FORG0001")}if(t instanceof $e)return new ft(1*t);if(Le(t))return new ft(t.value);throw new e("XPTY0004","Casting value '"+t+"' to xs:float can never succeed")},a("float",ft),pt.prototype=new Ve,pt.prototype.builtInKind=c.GDAY_DT,pt.prototype.primitiveKind=Be.PRIMITIVE_GDAY,pt.prototype.day=null,pt.prototype.timezone=null,pt.prototype.toString=function(){return"---"+et(this.day)+tt(this)};var Io=/^---(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;pt.cast=function(t){if(t instanceof pt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Io);if(n){var o=+n[1];return new pt(o,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Ze||t instanceof Je)return new pt(t.day,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gDay can never succeed")},a("gDay",pt),ht.prototype=new Ve,ht.prototype.builtInKind=c.GMONTH_DT,ht.prototype.primitiveKind=Be.PRIMITIVE_GMONTH,ht.prototype.month=null,ht.prototype.timezone=null,ht.prototype.toString=function(){return"--"+et(this.month)+tt(this)};var bo=/^--(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;ht.cast=function(t){if(t instanceof ht)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(bo);if(n){var o=+n[1];return new ht(o,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Ze||t instanceof Je)return new ht(t.month,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gMonth can never succeed")},a("gMonth",ht),dt.prototype=new Ve,dt.prototype.builtInKind=c.GMONTHDAY_DT,dt.prototype.primitiveKind=Be.PRIMITIVE_GMONTHDAY,dt.prototype.month=null,dt.prototype.day=null,dt.prototype.timezone=null,dt.prototype.toString=function(){return"--"+et(this.month)+"-"+et(this.day)+tt(this)};var No=/^--(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;dt.cast=function(t){if(t instanceof dt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(No);if(n){var o=+n[1],r=+n[2];if(r-1<Qe(1976,o))return new dt(o,r,n[3]?"Z"==n[3]?0:("-"==n[4]?-1:1)*(60*n[5]+1*n[6]):null);throw new e("FORG0001","Invalid date '"+t+"' (Non-existent date)")}throw new e("FORG0001")}if(t instanceof Ze||t instanceof Je)return new dt(t.month,t.day,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gMonthDay can never succeed")},a("gMonthDay",dt),mt.prototype=new Ve,mt.prototype.builtInKind=c.GYEAR_DT,mt.prototype.primitiveKind=Be.PRIMITIVE_GYEAR,mt.prototype.year=null,mt.prototype.timezone=null,mt.prototype.toString=function(){return et(this.year)+tt(this)};var Do=/^-?([1-9]\d\d\d+|0\d\d\d)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;mt.cast=function(t){if(t instanceof mt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Do);if(n){var o=+n[1];return new mt(o,n[2]?"Z"==n[2]?0:("-"==n[3]?-1:1)*(60*n[4]+1*n[5]):null)}throw new e("FORG0001")}if(t instanceof Ze||t instanceof Je)return new mt(t.year,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gYear can never succeed")},a("gYear",mt),vt.prototype=new Ve,vt.prototype.builtInKind=c.GYEARMONTH_DT,vt.prototype.primitiveKind=Be.PRIMITIVE_GYEARMONTH,vt.prototype.year=null,vt.prototype.month=null,vt.prototype.timezone=null,vt.prototype.toString=function(){return et(this.year)+"-"+et(this.month)+tt(this)};var Oo=/^-?([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;vt.cast=function(t){if(t instanceof vt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Oo);if(n){var o=+n[1],r=+n[2];return new vt(o,r,n[3]?"Z"==n[3]?0:("-"==n[4]?-1:1)*(60*n[5]+1*n[6]):null)}throw new e("FORG0001")}if(t instanceof Ze||t instanceof Je)return new vt(t.year,t.month,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:gYearMonth can never succeed")},a("gYearMonth",vt),wt.prototype=new Ve,wt.prototype.builtInKind=c.HEXBINARY_DT,wt.prototype.primitiveKind=Be.PRIMITIVE_HEXBINARY,wt.prototype.value=null,wt.prototype.valueOf=function(){return this.value},wt.prototype.toString=function(){return this.value};var Po=/^([0-9a-fA-F]{2})*$/;wt.cast=function(t){if(t instanceof wt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Po);if(n)return new wt(n[0].toUpperCase());throw new e("FORG0001")}if(t instanceof je){for(var o,r=Cn(t.valueOf()),i=[],a=0,s=r.length;s>a;a++)o=r.charCodeAt(a).toString(16),i.push(new Pn(3-o.length).join("0")+o);return new wt(i.join(""))}throw new e("XPTY0004","Casting value '"+t+"' to xs:hexBinary can never succeed")},a("hexBinary",wt),yt.prototype=new Ve,yt.prototype.builtInKind=c.NOTATION_DT,yt.prototype.primitiveKind=Be.PRIMITIVE_NOTATION,yt.cast=function(t){throw new e("XPST0017","Abstract type used in constructor function xs:NOTATION")},a("NOTATION",yt),gt.prototype=new Ve,gt.prototype.builtInKind=c.QNAME_DT,gt.prototype.primitiveKind=Be.PRIMITIVE_QNAME,gt.prototype.prefix=null,gt.prototype.localName=null,gt.prototype.namespaceURI=null,gt.prototype.toString=function(){return(this.prefix?this.prefix+":":"")+this.localName};var So=/^(?:(?![0-9-])([\w-]+)\:)?(?![0-9-])([\w-]+)$/;gt.cast=function(t){if(t instanceof gt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(So);if(n)return new gt(n[1]||null,n[2],null);throw new e("FORG0001")}throw new e("XPTY0004","Casting value '"+t+"' to xs:QName can never succeed")},a("QName",gt),Tt.prototype=new Ve,Tt.prototype.value=null,Tt.prototype.builtInKind=c.STRING_DT,Tt.prototype.primitiveKind=Be.PRIMITIVE_STRING,Tt.prototype.valueOf=function(){return this.value},Tt.prototype.toString=function(){return this.value},Tt.cast=function(e){return new Tt(Dn(e))},a("string",Tt),xt.prototype=new Ve,xt.prototype.builtInKind=c.TIME_DT,xt.prototype.primitiveKind=Be.PRIMITIVE_TIME,xt.prototype.hours=null,xt.prototype.minutes=null,xt.prototype.seconds=null,xt.prototype.timezone=null,xt.prototype.toString=function(){return ot(this)+tt(this)};var Ro=/^(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;xt.cast=function(t){if(t instanceof xt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Ro);if(n){var o=!!n[6];return new xt(o?0:+n[2],o?0:+n[3],On((o?0:n[4])+"."+(o?0:n[5]||0)),n[8]?"Z"==n[8]?0:("-"==n[9]?-1:1)*(60*n[10]+1*n[11]):null)}throw new e("FORG0001")}if(t instanceof Je)return new xt(t.hours,t.minutes,t.seconds,t.timezone);throw new e("XPTY0004","Casting value '"+t+"' to xs:time can never succeed")},a("time",xt),It.prototype=new Ve,It.prototype.builtInKind=c.XT_UNTYPEDATOMIC_DT,It.prototype.toString=function(){return Dn(this.value)},It.cast=function(e){return e instanceof It?e:new It(Dn(e))},a("untypedAtomic",It),bt.prototype=new st,bt.prototype.builtInKind=c.XT_YEARMONTHDURATION_DT,bt.prototype.toString=function(){return(this.negative?"-":"")+"P"+(ut(this)||"0M")};var ko=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/;bt.cast=function(t){if(t instanceof bt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(ko);if(n)return Nt(new bt(+n[2]||0,+n[3]||0,"-"==n[1]));throw new e("FORG0001")}if(t instanceof Dt)return new bt(0,0);if(t instanceof st)return new bt(t.year,t.month,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:yearMonthDuration can never succeed")},a("yearMonthDuration",bt),Dt.prototype=new st,Dt.prototype.builtInKind=c.DAYTIMEDURATION_DT,Dt.prototype.toString=function(){return(this.negative?"-":"")+"P"+(ct(this)||"T0S")};var Mo=/^(-)?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;Dt.cast=function(t){if(t instanceof Dt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Mo);if(n)return Ot(new Dt(+n[2]||0,+n[3]||0,+n[4]||0,+n[5]||0,"-"==n[1]));throw new e("FORG0001")}if(t instanceof bt)return new Dt(0,0,0,0);if(t instanceof st)return new Dt(t.day,t.hours,t.minutes,t.seconds,t.negative);throw new e("XPTY0004","Casting value '"+t+"' to xs:dayTimeDuration can never succeed")},a("dayTimeDuration",Dt),Pt.prototype=new it,Pt.prototype.builtInKind=c.INTEGER_DT;var Ao=/^[-+]?[0-9]+$/;Pt.cast=function(t){if(t instanceof Pt)return t;if(t instanceof Tt||t instanceof It){var n=Gn(t).match(Ao);if(n)return new Pt(~~t);throw new e("FORG0001")}if(t instanceof $e)return new Pt(1*t);if(Le(t)){if(_n(t)||!Xn(t))throw new e("FOCA0002","Cannot convert '"+t+"' to xs:integer");return new Pt(~~t)}throw new e("XPTY0004","Casting value '"+t+"' to xs:integer can never succeed")},a("integer",Pt),St.prototype=new Pt,St.prototype.builtInKind=c.NONPOSITIVEINTEGER_DT,St.cast=function(e){return new St(On(e))},a("nonPositiveInteger",St),Rt.prototype=new St,Rt.prototype.builtInKind=c.NEGATIVEINTEGER_DT,Rt.cast=function(e){return new Rt(On(e))},a("negativeInteger",Rt),kt.prototype=new Pt,kt.prototype.builtInKind=c.LONG_DT,kt.cast=function(e){return new kt(On(e))},a("long",kt),Mt.prototype=new kt,Mt.prototype.builtInKind=c.INT_DT,Mt.cast=function(e){return new Mt(On(e))},a("int",Mt),At.prototype=new Mt,At.prototype.builtInKind=c.SHORT_DT,At.cast=function(e){return new At(On(e))},a("short",At),_t.prototype=new At,_t.prototype.builtInKind=c.BYTE_DT,_t.cast=function(e){return new _t(On(e))},a("byte",_t),Xt.prototype=new Pt,Xt.prototype.builtInKind=c.NONNEGATIVEINTEGER_DT,Xt.cast=function(e){return new Xt(On(e))},a("nonNegativeInteger",Xt),Yt.prototype=new Xt,Yt.prototype.builtInKind=c.POSITIVEINTEGER_DT,Yt.cast=function(e){return new Yt(On(e))},a("positiveInteger",Yt),Ut.prototype=new Xt,Ut.prototype.builtInKind=c.UNSIGNEDLONG_DT,Ut.cast=function(e){return new Ut(On(e))},a("unsignedLong",Ut),zt.prototype=new Xt,zt.prototype.builtInKind=c.UNSIGNEDINT_DT,zt.cast=function(e){return new zt(On(e))},a("unsignedInt",zt),Ct.prototype=new zt,Ct.prototype.builtInKind=c.UNSIGNEDSHORT_DT,Ct.cast=function(e){return new Ct(On(e))},a("unsignedShort",Ct),Ft.prototype=new Ct,Ft.prototype.builtInKind=c.UNSIGNEDBYTE_DT,Ft.cast=function(e){return new Ft(On(e))},a("unsignedByte",Ft),Gt.prototype=new Tt,Gt.prototype.builtInKind=c.NORMALIZEDSTRING_DT,Gt.cast=function(e){return new Gt(Dn(e))},a("normalizedString",Gt),qt.prototype=new Gt,qt.prototype.builtInKind=c.TOKEN_DT,qt.cast=function(e){return new qt(Dn(e))},a("token",qt),Kt.prototype=new qt,Kt.prototype.builtInKind=c.NAME_DT,Kt.cast=function(e){return new Kt(Dn(e))},a("Name",Kt),Bt.prototype=new Kt,Bt.prototype.builtInKind=c.NCNAME_DT,Bt.cast=function(e){return new Bt(Dn(e))},a("NCName",Bt),Vt.prototype=new Bt,Vt.prototype.builtInKind=c.ENTITY_DT,Vt.cast=function(e){return new Vt(Dn(e))},a("ENTITY",Vt),Lt.prototype=new Bt,Lt.prototype.builtInKind=c.ID_DT,Lt.cast=function(e){return new Lt(Dn(e))},a("ID",Lt),Ht.prototype=new qt,Ht.prototype.builtInKind=c.LANGUAGE_DT,Ht.cast=function(e){return new Ht(Dn(e))},a("language",Ht),jt.prototype=new qt,jt.prototype.builtInKind=c.NMTOKEN_DT,jt.cast=function(e){return new jt(Dn(e))},a("NMTOKEN",jt),Zt.prototype=new $t,Qt.prototype=new Zt,Wt.prototype=new Zt,Jt.prototype=new Zt,en.prototype=new Zt,tn.prototype=new Zt,nn.prototype=new Zt,Wn["hexBinary-equal"]=function(e,t){return new $e(e.valueOf()==t.valueOf())},Wn["base64Binary-equal"]=function(e,t){return new $e(e.valueOf()==t.valueOf())},Wn["boolean-equal"]=function(e,t){return new $e(e.valueOf()==t.valueOf())},Wn["boolean-less-than"]=function(e,t){return new $e(e.valueOf()<t.valueOf())},Wn["boolean-greater-than"]=function(e,t){return new $e(e.valueOf()>t.valueOf())},Wn["yearMonthDuration-less-than"]=function(e,t){return new $e(fn(e)<fn(t))},Wn["yearMonthDuration-greater-than"]=function(e,t){return new $e(fn(e)>fn(t))},Wn["dayTimeDuration-less-than"]=function(e,t){return new $e(cn(e)<cn(t))},Wn["dayTimeDuration-greater-than"]=function(e,t){return new $e(cn(e)>cn(t))},Wn["duration-equal"]=function(e,t){return new $e(e.negative==t.negative&&fn(e)==fn(t)&&cn(e)==cn(t))},Wn["dateTime-equal"]=function(e,t){return an(e,t,"eq")},Wn["dateTime-less-than"]=function(e,t){return an(e,t,"lt")},Wn["dateTime-greater-than"]=function(e,t){return an(e,t,"gt")},Wn["date-equal"]=function(e,t){return rn(e,t,"eq")},Wn["date-less-than"]=function(e,t){return rn(e,t,"lt")},Wn["date-greater-than"]=function(e,t){return rn(e,t,"gt")},Wn["time-equal"]=function(e,t){return on(e,t,"eq")},Wn["time-less-than"]=function(e,t){return on(e,t,"lt")},Wn["time-greater-than"]=function(e,t){return on(e,t,"gt")},Wn["gYearMonth-equal"]=function(e,t){return an(new Je(e.year,e.month,Qe(e.year,e.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new Je(t.year,t.month,Qe(t.year,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Wn["gYear-equal"]=function(e,t){return an(new Je(e.year,1,1,0,0,0,null==e.timezone?this.timezone:e.timezone),new Je(t.year,1,1,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Wn["gMonthDay-equal"]=function(e,t){return an(new Je(1972,e.month,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new Je(1972,t.month,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Wn["gMonth-equal"]=function(e,t){return an(new Je(1972,e.month,Qe(1972,t.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new Je(1972,t.month,Qe(1972,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Wn["gDay-equal"]=function(e,t){return an(new Je(1972,12,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new Je(1972,12,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},Wn["add-yearMonthDurations"]=function(e,t){return pn(fn(e)+fn(t))},Wn["subtract-yearMonthDurations"]=function(e,t){return pn(fn(e)-fn(t))},Wn["multiply-yearMonthDuration"]=function(e,t){return pn(fn(e)*t)},Wn["divide-yearMonthDuration"]=function(e,t){return pn(fn(e)/t)},Wn["divide-yearMonthDuration-by-yearMonthDuration"]=function(e,t){return new it(fn(e)/fn(t))},Wn["add-dayTimeDurations"]=function(e,t){return ln(cn(e)+cn(t))},Wn["subtract-dayTimeDurations"]=function(e,t){return ln(cn(e)-cn(t))},Wn["multiply-dayTimeDuration"]=function(e,t){return ln(cn(e)*t)},Wn["divide-dayTimeDuration"]=function(e,t){return ln(cn(e)/t)},Wn["divide-dayTimeDuration-by-dayTimeDuration"]=function(e,t){return new it(cn(e)/cn(t))},Wn["subtract-dateTimes"]=function(e,t){return ln(dn(e)-dn(t))},Wn["subtract-dates"]=function(e,t){return ln(dn(e)-dn(t))},Wn["subtract-times"]=function(e,t){return ln(hn(e)-hn(t))},Wn["add-yearMonthDuration-to-dateTime"]=function(e,t){return sn(e,t,"+")},Wn["add-dayTimeDuration-to-dateTime"]=function(e,t){return un(e,t,"+")},Wn["subtract-yearMonthDuration-from-dateTime"]=function(e,t){return sn(e,t,"-")},Wn["subtract-dayTimeDuration-from-dateTime"]=function(e,t){return un(e,t,"-")},Wn["add-yearMonthDuration-to-date"]=function(e,t){return sn(e,t,"+")},Wn["add-dayTimeDuration-to-date"]=function(e,t){return un(e,t,"+")},Wn["subtract-yearMonthDuration-from-date"]=function(e,t){return sn(e,t,"-")},Wn["subtract-dayTimeDuration-from-date"]=function(e,t){return un(e,t,"-")},Wn["add-dayTimeDuration-to-time"]=function(e,t){var n=new xt(e.hours,e.minutes,e.seconds,e.timezone);return n.hours+=t.hours,n.minutes+=t.minutes,n.seconds+=t.seconds,Et(n)},Wn["subtract-dayTimeDuration-from-time"]=function(e,t){var n=new xt(e.hours,e.minutes,e.seconds,e.timezone);return n.hours-=t.hours,n.minutes-=t.minutes,n.seconds-=t.seconds,Et(n)},Wn["is-same-node"]=function(e,t){return new $e(this.DOMAdapter.isSameNode(e,t))},Wn["node-before"]=function(e,t){return new $e(!!(4&this.DOMAdapter.compareDocumentPosition(e,t)))},Wn["node-after"]=function(e,t){return new $e(!!(2&this.DOMAdapter.compareDocumentPosition(e,t)))},Wn["numeric-add"]=function(e,t){var n=e.valueOf(),o=t.valueOf(),r=Mn.pow(10,mn(n,o));return vn(e,t,(n*r+o*r)/r)},Wn["numeric-subtract"]=function(e,t){var n=e.valueOf(),o=t.valueOf(),r=Mn.pow(10,mn(n,o));return vn(e,t,(n*r-o*r)/r)},Wn["numeric-multiply"]=function(e,t){var n=e.valueOf(),o=t.valueOf(),r=Mn.pow(10,mn(n,o));return vn(e,t,n*r*(o*r)/(r*r))},Wn["numeric-divide"]=function(e,t){var n=e.valueOf(),o=t.valueOf(),r=Mn.pow(10,mn(n,o));return vn(e,t,e*r/(t*r))},Wn["numeric-integer-divide"]=function(e,t){return new Pt(~~(e/t))},Wn["numeric-mod"]=function(e,t){var n=e.valueOf(),o=t.valueOf(),r=Mn.pow(10,mn(n,o));return vn(e,t,n*r%(o*r)/r)},Wn["numeric-unary-plus"]=function(e){return e},Wn["numeric-unary-minus"]=function(e){return e.value*=-1,e},Wn["numeric-equal"]=function(e,t){return new $e(e.valueOf()==t.valueOf())},Wn["numeric-less-than"]=function(e,t){return new $e(e.valueOf()<t.valueOf())},Wn["numeric-greater-than"]=function(e,t){return new $e(e.valueOf()>t.valueOf())},Wn["QName-equal"]=function(e,t){return new $e(e.localName==t.localName&&e.namespaceURI==t.namespaceURI)},Wn.concatenate=function(e,t){return e.concat(t)},Wn.union=function(t,n){for(var o,r=[],i=0,a=t.length;a>i;i++){if(!this.DOMAdapter.isNode(o=t[i]))throw new e("XPTY0004","Required item type of first operand of 'union' is node()");-1==qn(r,o)&&r.push(o)}for(var o,i=0,a=n.length;a>i;i++){if(!this.DOMAdapter.isNode(o=n[i]))throw new e("XPTY0004","Required item type of second operand of 'union' is node()");-1==qn(r,o)&&r.push(o)}return En(r,this)},Wn.intersect=function(t,n){for(var o,r,i=[],a=0,s=t.length;s>a;a++){if(!this.DOMAdapter.isNode(o=t[a]))throw new e("XPTY0004","Required item type of second operand of 'intersect' is node()");r=!1;for(var u=0,c=n.length;c>u&&!r;u++){if(!this.DOMAdapter.isNode(n[u]))throw new e("XPTY0004","Required item type of first operand of 'intersect' is node()");r=this.DOMAdapter.isSameNode(n[u],o)}r&&-1==qn(i,o)&&i.push(o)}return En(i,this)},Wn.except=function(t,n){for(var o,r,i=[],a=0,s=t.length;s>a;a++){if(!this.DOMAdapter.isNode(o=t[a]))throw new e("XPTY0004","Required item type of second operand of 'except' is node()");r=!1;for(var u=0,c=n.length;c>u&&!r;u++){if(!this.DOMAdapter.isNode(n[u]))throw new e("XPTY0004","Required item type of first operand of 'except' is node()");r=this.DOMAdapter.isSameNode(n[u],o)}r||-1!=qn(i,o)||i.push(o)}return En(i,this)},Wn.to=function(e,t){for(var n=[],o=e.valueOf(),r=t.valueOf();r>=o;o++)n.push(new Pt(o));return n},i("node-name",[[Zt,"?"]],function(e){if(null!=e){var t=this.DOMAdapter.getProperty;switch(t(e,"nodeType")){case 1:case 2:return new gt(t(e,"prefix"),t(e,"localName"),t(e,"namespaceURI"));case 5:throw"Not implemented";case 6:throw"Not implemented";case 7:return new gt(null,t(e,"target"),null);case 10:return new gt(null,t(e,"name"),null)}}return null}),i("nilled",[[Zt,"?"]],function(e){return null!=e&&1==this.DOMAdapter.getProperty(e,"nodeType")?new $e(!1):null}),i("string",[[$t,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=this.item}return null==t?new Tt(""):Tt.cast(xn([t],this)[0])}),i("data",[[$t,"*"]],function(e){return xn(e,this)}),i("base-uri",[[Zt,"?",!0]],function(t){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","base-uri() function called when the context item is not a node");t=this.item}return He.cast(new Tt(this.DOMAdapter.getProperty(t,"baseURI")||""))}),i("document-uri",[[Zt,"?"]],function(e){if(null!=e){var t=this.DOMAdapter.getProperty;if(9==t(e,"nodeType"))return He.cast(new Tt(t(e,"documentURI")||""))}return null}),i("resolve-uri",[[Tt,"?"],[Tt,"",!0]],function(t,n){var n;if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","resolve-uri() function called when the context item is not a node");n=new Tt(this.DOMAdapter.getProperty(this.item,"baseURI")||"")}if(null==t)return null;if(""==t.valueOf()||"#"==t.valueOf().charAt(0))return He.cast(n);var o=He.cast(t);if(o.scheme)return o;var r=He.cast(n);if(o.scheme=r.scheme,!o.authority&&(o.authority=r.authority,"/"!=o.path.charAt(0))){var i=o.path.split("/"),a=r.path.split("/");a.pop();for(var s=""==a[0]?1:0,u=0,c=i.length;c>u;u++)".."==i[u]?a.length>s?a.pop():(a.push(i[u]),s++):"."!=i[u]&&a.push(i[u]);(".."==i[--u]||"."==i[u])&&a.push(""),o.path=a.join("/")}return o}),i("true",[],function(){return new $e(!0)}),i("false",[],function(){return new $e(!1)}),i("not",[[$t,"*"]],function(e){return new $e(!Tn(e,this))}),i("position",[],function(){return new Pt(this.position)}),i("last",[],function(){return new Pt(this.size)}),i("current-dateTime",[],function(){return this.dateTime}),i("current-date",[],function(){return Ze.cast(this.dateTime)}),i("current-time",[],function(){return xt.cast(this.dateTime)}),i("implicit-timezone",[],function(){return this.timezone}),i("default-collation",[],function(){return new Tt(this.staticContext.defaultCollationName)}),i("static-base-uri",[],function(){return He.cast(new Tt(this.staticContext.baseURI||""))}),i("years-from-duration",[[st,"?"]],function(e){return wn(e,"year")}),i("months-from-duration",[[st,"?"]],function(e){return wn(e,"month")}),i("days-from-duration",[[st,"?"]],function(e){return wn(e,"day")}),i("hours-from-duration",[[st,"?"]],function(e){return wn(e,"hours")}),i("minutes-from-duration",[[st,"?"]],function(e){return wn(e,"minutes")}),i("seconds-from-duration",[[st,"?"]],function(e){return wn(e,"seconds")}),i("year-from-dateTime",[[Je,"?"]],function(e){return yn(e,"year")}),i("month-from-dateTime",[[Je,"?"]],function(e){return yn(e,"month")}),i("day-from-dateTime",[[Je,"?"]],function(e){return yn(e,"day")}),i("hours-from-dateTime",[[Je,"?"]],function(e){return yn(e,"hours")}),i("minutes-from-dateTime",[[Je,"?"]],function(e){return yn(e,"minutes")}),i("seconds-from-dateTime",[[Je,"?"]],function(e){return yn(e,"seconds")}),i("timezone-from-dateTime",[[Je,"?"]],function(e){return yn(e,"timezone")}),i("year-from-date",[[Ze,"?"]],function(e){return yn(e,"year")}),i("month-from-date",[[Ze,"?"]],function(e){return yn(e,"month")}),i("day-from-date",[[Ze,"?"]],function(e){return yn(e,"day")}),i("timezone-from-date",[[Ze,"?"]],function(e){return yn(e,"timezone")}),i("hours-from-time",[[xt,"?"]],function(e){return yn(e,"hours")}),i("minutes-from-time",[[xt,"?"]],function(e){return yn(e,"minutes")}),i("seconds-from-time",[[xt,"?"]],function(e){return yn(e,"seconds")}),i("timezone-from-time",[[xt,"?"]],function(e){return yn(e,"timezone")}),i("adjust-dateTime-to-timezone",[[Je,"?"],[Dt,"?",!0]],function(e,t){return gn(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),i("adjust-date-to-timezone",[[Ze,"?"],[Dt,"?",!0]],function(e,t){return gn(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),i("adjust-time-to-timezone",[[xt,"?"],[Dt,"?",!0]],function(e,t){return gn(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}),i("name",[[Zt,"?",!0]],function(t){if(arguments.length){if(null==t)return new Tt("")}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","name() function called when the context item is not a node");t=this.item}var n=$n["node-name"].call(this,t);return new Tt(null==n?"":n.toString())}),i("local-name",[[Zt,"?",!0]],function(t){if(arguments.length){if(null==t)return new Tt("")}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","local-name() function called when the context item is not a node");t=this.item}return new Tt(this.DOMAdapter.getProperty(t,"localName")||"")}),i("namespace-uri",[[Zt,"?",!0]],function(t){if(arguments.length){if(null==t)return He.cast(new Tt(""))}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","namespace-uri() function called when the context item is not a node");t=this.item}return He.cast(new Tt(this.DOMAdapter.getProperty(t,"namespaceURI")||""))}),i("number",[[Ve,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=xn([this.item],this)[0]}var n=new at(Yn);if(null!=t)try{n=at.cast(t)}catch(o){}return n}),i("lang",[[Tt,"?"],[Zt,"",!0]],function(t,n){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","lang() function called when the context item is not a node");n=this.item}var o=this.DOMAdapter.getProperty;2==o(n,"nodeType")&&(n=o(n,"ownerElement"));for(var r;n;n=o(n,"parentNode"))if(r=o(n,"attributes"))for(var i=0,a=r.length;a>i;i++)if("xml:lang"==o(r[i],"nodeName"))return new $e(o(r[i],"value").replace(/-.+/,"").toLowerCase()==t.valueOf().replace(/-.+/,"").toLowerCase());return new $e(!1)}),i("root",[[Zt,"?",!0]],function(t){if(arguments.length){if(null==t)return null}else{if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","root() function called when the context item is not a node");t=this.item}var n=this.DOMAdapter.getProperty;2==n(t,"nodeType")&&(t=n(t,"ownerElement"));for(var o=t;o;o=n(t,"parentNode"))t=o;return t}),i("abs",[[at,"?"]],function(e){return new it(Mn.abs(e))}),i("ceiling",[[at,"?"]],function(e){return new it(Mn.ceil(e))}),i("floor",[[at,"?"]],function(e){return new it(Mn.floor(e))}),i("round",[[at,"?"]],function(e){return new it(Mn.round(e))}),i("round-half-to-even",[[at,"?"],[Pt,"",!0]],function(e,t){var n=arguments.length>1?t.valueOf():0;if(0>n){var o=new Pt(Mn.pow(10,-n)),r=Mn.round(Wn["numeric-divide"].call(this,e,o)),i=new Pt(r);return nDecimal=Mn.abs(Wn["numeric-subtract"].call(this,i,Wn["numeric-divide"].call(this,e,o))),Wn["numeric-multiply"].call(this,Wn["numeric-add"].call(this,i,new it(.5==nDecimal&&r%2?-1:0)),o)}var o=new Pt(Mn.pow(10,n)),r=Mn.round(Wn["numeric-multiply"].call(this,e,o)),i=new Pt(r);return nDecimal=Mn.abs(Wn["numeric-subtract"].call(this,i,Wn["numeric-multiply"].call(this,e,o))),Wn["numeric-divide"].call(this,Wn["numeric-add"].call(this,i,new it(.5==nDecimal&&r%2?-1:0)),o)}),i("resolve-QName",[[Tt,"?"],[en]],function(t,n){if(null==t)return null;var o=t.valueOf(),r=o.match(So);if(!r)throw new e("FOCA0002","Invalid QName '"+o+"'");var i=r[1]||null,a=r[2],s=this.DOMAdapter.lookupNamespaceURI(n,i);if(null!=i&&!s)throw new e("FONS0004","Namespace prefix '"+i+"' has not been declared");return new gt(i,a,s||null)}),i("QName",[[Tt,"?"],[Tt]],function(t,n){var o=n.valueOf(),r=o.match(So);if(!r)throw new e("FOCA0002","Invalid QName '"+o+"'");return new gt(r[1]||null,r[2]||null,null==t?"":t.valueOf())}),i("prefix-from-QName",[[gt,"?"]],function(e){return null!=e&&e.prefix?new Bt(e.prefix):null}),i("local-name-from-QName",[[gt,"?"]],function(e){return null==e?null:new Bt(e.localName)}),i("namespace-uri-from-QName",[[gt,"?"]],function(e){return null==e?null:He.cast(new Tt(e.namespaceURI||""))}),i("namespace-uri-for-prefix",[[Tt,"?"],[en]],function(e,t){
var n=null==e?"":e.valueOf(),o=this.DOMAdapter.lookupNamespaceURI(t,n||null);return null==o?null:He.cast(new Tt(o))}),i("in-scope-prefixes",[[en]],function(e){throw"Function 'in-scope-prefixes' not implemented"}),i("boolean",[[$t,"*"]],function(e){return new $e(Tn(e,this))}),i("index-of",[[Ve,"*"],[Ve],[Tt,"",!0]],function(e,t,n){if(!e.length||null==t)return[];var o=t;o instanceof It&&(o=Tt.cast(o));for(var r,i=[],a=0,s=e.length;s>a;a++)r=e[a],r instanceof It&&(r=Tt.cast(r)),r.valueOf()===o.valueOf()&&i.push(new Pt(a+1));return i}),i("empty",[[$t,"*"]],function(e){return new $e(!e.length)}),i("exists",[[$t,"*"]],function(e){return new $e(!!e.length)}),i("distinct-values",[[Ve,"*"],[Tt,"",!0]],function(e,t){if(!e.length)return null;for(var n,o=[],r=0,i=e.length;i>r;r++){n=e[r],n instanceof It&&(n=Tt.cast(n));for(var a,s=0,u=o.length,c=!1;u>s&&!c;s++)a=o[s],a instanceof It&&(a=Tt.cast(a)),a.valueOf()===n.valueOf()&&(c=!0);c||o.push(e[r])}return o}),i("insert-before",[[$t,"*"],[Pt],[$t,"*"]],function(e,t,n){if(!e.length)return n;if(!n.length)return e;var o=e.length,r=t.valueOf();1>r?r=1:r>o&&(r=o+1);for(var i=[],a=0;o>a;a++)r==a+1&&(i=i.concat(n)),i.push(e[a]);return r==a+1&&(i=i.concat(n)),i}),i("remove",[[$t,"*"],[Pt]],function(e,t){if(!e.length)return[];var n=e.length,o=t.valueOf();if(1>o||o>n)return e;for(var r=[],i=0;n>i;i++)o!=i+1&&r.push(e[i]);return r}),i("reverse",[[$t,"*"]],function(e){return e.reverse(),e}),i("subsequence",[[$t,"*"],[at,""],[at,"",!0]],function(e,t,n){var o=Mn.round(t),r=arguments.length>2?Mn.round(n):e.length-o+1;return e.slice(o-1,o-1+r)}),i("unordered",[[$t,"*"]],function(e){return e}),i("zero-or-one",[[$t,"*"]],function(t){if(t.length>1)throw new e("FORG0003");return t}),i("one-or-more",[[$t,"*"]],function(t){if(!t.length)throw new e("FORG0004");return t}),i("exactly-one",[[$t,"*"]],function(t){if(1!=t.length)throw new e("FORG0005");return t}),i("deep-equal",[[$t,"*"],[$t,"*"],[Tt,"",!0]],function(e,t,n){throw"Function 'deep-equal' not implemented"}),i("count",[[$t,"*"]],function(e){return new Pt(e.length)}),i("avg",[[Ve,"*"]],function(t){if(!t.length)return null;try{var n=t[0];n instanceof It&&(n=at.cast(n));for(var o,r=1,i=t.length;i>r;r++)o=t[r],o instanceof It&&(o=at.cast(o)),n=oo["+"](n,o,this);return ro.div(n,new Pt(i),this)}catch(a){throw"XPTY0004"!=a.code?a:new e("FORG0006","Input to avg() contains a mix of types")}}),i("max",[[Ve,"*"],[Tt,"",!0]],function(t,n){if(!t.length)return null;try{for(var o=t[0],r=1,i=t.length;i>r;r++)eo.ge(t[r],o,this).valueOf()&&(o=t[r]);return o}catch(a){throw"XPTY0004"!=a.code?a:new e("FORG0006","Input to max() contains a mix of not comparable values")}}),i("min",[[Ve,"*"],[Tt,"",!0]],function(t,n){if(!t.length)return null;try{for(var o=t[0],r=1,i=t.length;i>r;r++)eo.le(t[r],o,this).valueOf()&&(o=t[r]);return o}catch(a){throw"XPTY0004"!=a.code?a:new e("FORG0006","Input to min() contains a mix of not comparable values")}}),i("sum",[[Ve,"*"],[Ve,"?",!0]],function(t,n){if(!t.length)return arguments.length>1?n:new at(0);try{var o=t[0];o instanceof It&&(o=at.cast(o));for(var r,i=1,a=t.length;a>i;i++)r=t[i],r instanceof It&&(r=at.cast(r)),o=oo["+"](o,r,this);return o}catch(s){throw"XPTY0004"!=s.code?s:new e("FORG0006","Input to sum() contains a mix of types")}}),i("id",[[Tt,"*"],[Zt,"",!0]],function(t,n){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new e("XPTY0004","id() function called when the context item is not a node");n=this.item}var o=$n.root.call(this,n);if(9!=this.DOMAdapter.getProperty(o,"nodeType"))throw new e("FODC0001");for(var r=[],i=0;i<t.length;i++)for(var a=0,s=Gn(t[i]).split(/\s+/),u=s.length;u>a;a++)(n=this.DOMAdapter.getElementById(o,s[a]))&&-1==qn(r,n)&&r.push(n);return En(r,this)}),i("idref",[[Tt,"*"],[Zt,"",!0]],function(e,t){throw"Function 'idref' not implemented"}),i("doc",[[Tt,"?",!0]],function(e){throw"Function 'doc' not implemented"}),i("doc-available",[[Tt,"?",!0]],function(e){throw"Function 'doc-available' not implemented"}),i("collection",[[Tt,"?",!0]],function(e){throw"Function 'collection' not implemented"}),i("element-with-id",[[Tt,"*"],[Zt,"",!0]],function(e,t){throw"Function 'element-with-id' not implemented"}),i("codepoints-to-string",[[Pt,"*"]],function(e){for(var t=[],n=0,o=e.length;o>n;n++)t.push(Dn.fromCharCode(e[n]));return new Tt(t.join(""))}),i("string-to-codepoints",[[Tt,"?"]],function(e){if(null==e)return null;var t=e.valueOf();if(""==t)return[];for(var n=[],o=0,r=t.length;r>o;o++)n.push(new Pt(t.charCodeAt(o)));return n}),i("compare",[[Tt,"?"],[Tt,"?"],[Tt,"",!0]],function(t,n,o){if(null==t||null==n)return null;var r,i=this.staticContext.defaultCollationName;if(arguments.length>2&&(i=o.valueOf()),r=i==Bn+"/collation/codepoint"?_o:this.staticContext.getCollation(i),!r)throw new e("FOCH0002","Unknown collation {"+i+"}");return new Pt(r.compare(t.valueOf(),n.valueOf()))}),i("codepoint-equal",[[Tt,"?"],[Tt,"?"]],function(e,t){return null==e||null==t?null:new $e(e.valueOf()==t.valueOf())}),i("concat",null,function(){if(arguments.length<2)throw new e("XPST0017","Function concat() must have at least 2 arguments");for(var t,n=[],o=0,r=arguments.length;r>o;o++)t=arguments[o],Te(this,t,"?","each argument of concat()"),t.length&&(n[n.length]=Tt.cast(xn(t,this)[0]).valueOf());return new Tt(n.join(""))}),i("string-join",[[Tt,"*"],[Tt]],function(e,t){return new Tt(e.join(t))}),i("substring",[[Tt,"?"],[at],[at,"",!0]],function(e,t,n){var o=null==e?"":e.valueOf(),r=Mn.round(t)-1,i=arguments.length>2?r+Mn.round(n):o.length;return new Tt(i>r?o.substring(r,i):"")}),i("string-length",[[Tt,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=Tt.cast(xn([this.item],this)[0])}return new Pt(null==t?0:t.valueOf().length)}),i("normalize-space",[[Tt,"?",!0]],function(t){if(!arguments.length){if(!this.item)throw new e("XPDY0002");t=Tt.cast(xn([this.item],this)[0])}return new Tt(null==t?"":Gn(t).replace(/\s\s+/g," "))}),i("normalize-unicode",[[Tt,"?"],[Tt,"",!0]],function(e,t){throw"Function 'normalize-unicode' not implemented"}),i("upper-case",[[Tt,"?"]],function(e){return new Tt(null==e?"":e.valueOf().toUpperCase())}),i("lower-case",[[Tt,"?"]],function(e){return new Tt(null==e?"":e.valueOf().toLowerCase())}),i("translate",[[Tt,"?"],[Tt],[Tt]],function(e,t,n){if(null==e)return new Tt("");for(var o,r=e.valueOf().split(""),i=t.valueOf().split(""),a=n.valueOf().split(""),s=a.length,u=[],c=0,l=r.length;l>c;c++)-1==(o=i.indexOf(r[c]))?u[u.length]=r[c]:s>o&&(u[u.length]=a[o]);return new Tt(u.join(""))}),i("encode-for-uri",[[Tt,"?"]],function(e){return new Tt(null==e?"":window.encodeURIComponent(e))}),i("iri-to-uri",[[Tt,"?"]],function(e){return new Tt(null==e?"":window.encodeURI(window.decodeURI(e)))}),i("escape-html-uri",[[Tt,"?"]],function(e){if(null==e||""==e.valueOf())return new Tt("");for(var t,n=e.valueOf().split(""),o=0,r=n.length;r>o;o++)((t=n[o].charCodeAt(0))<32||t>126)&&(n[o]=window.encodeURIComponent(n[o]));return new Tt(n.join(""))}),i("contains",[[Tt,"?"],[Tt,"?"],[Tt,"",!0]],function(e,t,n){return new $e((null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf())>=0)}),i("starts-with",[[Tt,"?"],[Tt,"?"],[Tt,"",!0]],function(e,t,n){return new $e(0==(null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf()))}),i("ends-with",[[Tt,"?"],[Tt,"?"],[Tt,"",!0]],function(e,t,n){var o=null==e?"":e.valueOf(),r=null==t?"":t.valueOf();return new $e(o.indexOf(r)==o.length-r.length)}),i("substring-before",[[Tt,"?"],[Tt,"?"],[Tt,"",!0]],function(e,t,n){var o,r=null==e?"":e.valueOf(),i=null==t?"":t.valueOf();return new Tt((o=r.indexOf(i))>=0?r.substring(0,o):"")}),i("substring-after",[[Tt,"?"],[Tt,"?"],[Tt,"",!0]],function(e,t,n){var o,r=null==e?"":e.valueOf(),i=null==t?"":t.valueOf();return new Tt((o=r.indexOf(i))>=0?r.substring(o+i.length):"")}),i("matches",[[Tt,"?"],[Tt],[Tt,"",!0]],function(e,t,n){var o=null==e?"":e.valueOf(),r=In(t.valueOf(),arguments.length>2?n.valueOf():"");return new $e(r.test(o))}),i("replace",[[Tt,"?"],[Tt],[Tt],[Tt,"",!0]],function(e,t,n,o){var r=null==e?"":e.valueOf(),i=In(t.valueOf(),arguments.length>3?o.valueOf():"");return new $e(r.replace(i,n.valueOf()))}),i("tokenize",[[Tt,"?"],[Tt],[Tt,"",!0]],function(e,t,n){for(var o=null==e?"":e.valueOf(),r=In(t.valueOf(),arguments.length>2?n.valueOf():""),i=[],a=0,s=o.split(r),u=s.length;u>a;a++)i.push(new Tt(s[a]));return i}),i("trace",[[$t,"*"],[Tt]],function(e,t){var n=window.console;return n&&n.log&&n.log(t.valueOf(),e),e});var _o=new u;_o.equals=function(e,t){return e==t},_o.compare=function(e,t){return e==t?0:e>t?1:-1};var Xo=function(){};Xo.prototype.nodeType=2,Xo.prototype.nodeName=Xo.prototype.nodeValue=Xo.prototype.ownerDocument=Xo.prototype.localName=Xo.prototype.namespaceURI=Xo.prototype.prefix=Xo.prototype.attributes=Xo.prototype.childNodes=Xo.prototype.firstChild=Xo.prototype.lastChild=Xo.prototype.previousSibling=Xo.prototype.nextSibling=Xo.prototype.parentNode=Xo.prototype.name=Xo.prototype.specified=Xo.prototype.value=Xo.prototype.ownerElement=null,bn.prototype=new n;var Yo=new r;bn.prototype.getProperty=function(e,t){if(t in e)return e[t];if("baseURI"==t){for(var n,o="",r=Yo.getFunction("{http://www.w3.org/2005/xpath-functions}resolve-uri"),i=Yo.getDataType("{http://www.w3.org/2001/XMLSchema}string"),a=e;a;a=a.parentNode)1==a.nodeType&&(n=a.getAttribute("xml:base"))&&(o=r(new i(n),new i(o)).toString());return o}if("textContent"==t){var s=[];return function(e){for(var t,n=0;t=e.childNodes[n];n++)3==t.nodeType||4==t.nodeType?s.push(t.data):1==t.nodeType&&t.firstChild&&arguments.callee(t)}(e),s.join("")}},bn.prototype.compareDocumentPosition=function(e,t){if("compareDocumentPosition"in e)return e.compareDocumentPosition(t);if(t==e)return 0;var n,o,r,i,a,s=null,u=null;if(2==e.nodeType&&(s=e,e=this.getProperty(s,"ownerElement")),2==t.nodeType&&(u=t,t=this.getProperty(u,"ownerElement")),s&&u&&e&&e==t)for(i=0,n=this.getProperty(e,"attributes"),a=n.length;a>i;i++){if(o=n[i],o==s)return 36;if(o==u)return 34}var c,l,f,p,h=[],d=[];for(s&&h.push(s),r=e;r;r=r.parentNode)h.push(r);for(u&&d.push(u),r=t;r;r=r.parentNode)d.push(r);if((e.ownerDocument||e)!=(t.ownerDocument||t)||h[h.length-1]!=d[d.length-1])return 33;for(i=Mn.min(c=h.length,f=d.length);i;--i)if((l=h[--c])!=(p=d[--f])){if(2==l.nodeType)return 4;if(2==p.nodeType)return 2;if(!p.nextSibling)return 4;if(!l.nextSibling)return 2;for(r=p.previousSibling;r;r=r.previousSibling)if(r==l)return 4;return 2}return f>c?20:10},bn.prototype.lookupNamespaceURI=function(e,t){if("lookupNamespaceURI"in e)return e.lookupNamespaceURI(t);for(;e&&9!=e.nodeType;e=e.parentNode){if(t==this.getProperty(oChild,"prefix"))return this.getProperty(e,"namespaceURI");if(1==e.nodeType)for(var n=this.getProperty(e,"attributes"),o=0,r=n.length,i="xmlns:"+t;r>o;o++)if(this.getProperty(n[o],"nodeName")==i)return this.getProperty(n[o],"value")}return null},bn.prototype.getElementsByTagNameNS=function(e,t,n){if("getElementsByTagNameNS"in e)return e.getElementsByTagNameNS(t,n);var o=[],r="*"==t,i="*"==n;return function(e){for(var a,s=0;a=e.childNodes[s];s++)1==a.nodeType&&(!i&&n!=this.getProperty(a,"localName")||!r&&t!=this.getProperty(a,"namespaceURI")||(o[o.length]=a),a.firstChild&&arguments.callee(a))}(e),o};var Uo=new bn,zo=new bn;zo.getProperty=function(e,t){return"localName"==t&&1==e.nodeType?e.localName.toLowerCase():"namespaceURI"==t?1==e.nodeType?"http://www.w3.org/1999/xhtml":null:bn.prototype.getProperty.call(this,e,t)};var Co=new bn;Co.getProperty=function(e,t){if("localName"==t&&1==e.nodeType)return e.nodeName.toLowerCase();if("prefix"==t)return null;if("namespaceURI"==t)return 1==e.nodeType?"http://www.w3.org/1999/xhtml":null;if("textContent"==t)return e.innerText;if("attributes"==t&&1==e.nodeType){for(var n,o,r=[],i=0,a=e.attributes,s=a.length;s>i;i++)n=a[i],n.specified&&(o=new Xo,o.ownerElement=e,o.ownerDocument=e.ownerDocument,o.specified=!0,o.value=o.nodeValue=n.nodeValue,o.name=o.nodeName=o.localName=n.nodeName.toLowerCase(),r[r.length]=o);return r}return bn.prototype.getProperty.call(this,e,t)};var Fo=new bn;Fo.getProperty=function(e,t){if("localName"==t){if(7==e.nodeType)return null;if(1==e.nodeType)return e.baseName}if("prefix"==t||"namespaceURI"==t)return e[t]||null;if("textContent"==t)return e.text;if("attributes"==t&&1==e.nodeType){for(var n,o,r=[],i=0,a=e.attributes,s=a.length;s>i;i++)n=a[i],n.specified&&(o=new Xo,o.nodeType=2,o.ownerElement=e,o.ownerDocument=e.ownerDocument,o.specified=!0,o.value=o.nodeValue=n.nodeValue,o.name=o.nodeName=n.nodeName,o.localName=n.baseName,o.prefix=n.prefix||null,o.namespaceURI=n.namespaceURI||null,r[r.length]=o);return r}return bn.prototype.getProperty.call(this,e,t)},Fo.getElementById=function(e,t){return e.nodeFromID(t)};var Go=window.jQuery,qo=window.document,Ko=!!qo.namespaces&&!qo.createElementNS,Bo=!Ko&&"http://www.w3.org/1999/xhtml"!=qo.documentElement.namespaceURI,Vo=new r,Lo=new r;Vo.baseURI=qo.location.href,Vo.defaultFunctionNamespace="http://www.w3.org/2005/xpath-functions",Vo.defaultElementNamespace="http://www.w3.org/1999/xhtml",Lo.defaultFunctionNamespace=Vo.defaultFunctionNamespace;var Ho={};Ho.xpath=function(e,t,n){return Nn(e instanceof Go?e:new Go(e),t,n)},Go.extend(Go,Ho),Ho={},Ho.xpath=function(e,t){return Nn(this,e,t)},Go.extend(Go.prototype,Ho)}()},{}],8:[function(e,t,n){"use strict";var o="input:text",r="ghostMode.forms.inputs";n.canEmitEvents=!0,n.init=function(e,t){var r="undefined"!=typeof document.body.oninput?"input":"keyup";t.addEvent(document.body,r,n.browserEvent(e)),e.socket.on(o,n.socketEvent(e,t))},n.browserEvent=function(e){return function(t){var r,i=t.target||t.srcElement;n.canEmitEvents?("INPUT"===i.tagName||"TEXTAREA"===i.tagName)&&(r=e.utils.getElementData(i),r.value=i.value,e.socket.emit(o,r)):n.canEmitEvents=!0}},n.socketEvent=function(e,t){return function(n){if(!e.canSync(n,r))return!1;var o,i=e.utils.getSingleElement(n.tagName,n.index);return i?(i.value=n.value,o="undefined"!=typeof i.oninput?"input":"change",t.triggerEvent(i,o),i):!1}}},{}],9:[function(e,t,n){"use strict";n.plugins={inputs:e("./ghostmode.forms.input"),toggles:e("./ghostmode.forms.toggles"),submit:e("./ghostmode.forms.submit")},n.init=function(e,t){function o(o){n.plugins[o].init(e,t)}var r=!0,i=e.options.ghostMode.forms;i===!0&&(r=!1);for(var a in n.plugins)r?i[a]&&o(a):o(a)}},{"./ghostmode.forms.input":8,"./ghostmode.forms.submit":10,"./ghostmode.forms.toggles":11}],10:[function(e,t,n){"use strict";var o="form:submit",r="ghostMode.forms.submit";n.canEmitEvents=!0,n.init=function(e,t){var r=n.browserEvent(e);t.addEvent(document.body,"submit",r),t.addEvent(document.body,"reset",r),e.socket.on(o,n.socketEvent(e,t))},n.browserEvent=function(e){return function(t){if(n.canEmitEvents){var r=t.target||t.srcElement,i=e.utils.getElementData(r);i.type=t.type,e.socket.emit(o,i)}else n.canEmitEvents=!0}},n.socketEvent=function(e){return function(t){if(!e.canSync(t,r))return!1;var o=e.utils.getSingleElement(t.tagName,t.index);return n.canEmitEvents=!1,o&&"submit"===t.type&&o.submit(),o&&"reset"===t.type&&o.reset(),!1}}},{}],11:[function(e,t,n){"use strict";var o="input:toggles",r="ghostMode.forms.toggles";n.canEmitEvents=!0,n.init=function(e,t){var r=n.browserEvent(e);n.addEvents(t,r),e.socket.on(o,n.socketEvent(e,t))},n.addEvents=function(e,t){function n(n){for(var o=0,r=n.length;r>o;o+=1)e.addEvent(n[o],"change",t)}var o=document.getElementsByTagName("select"),r=document.getElementsByTagName("input");n(o),n(r)},n.browserEvent=function(e){return function(t){if(n.canEmitEvents){var r,i=t.target||t.srcElement;("radio"===i.type||"checkbox"===i.type||"SELECT"===i.tagName)&&(r=e.utils.getElementData(i),r.type=i.type,r.value=i.value,r.checked=i.checked,e.socket.emit(o,r))}else n.canEmitEvents=!0}},n.socketEvent=function(e){return function(t){if(!e.canSync(t,r))return!1;n.canEmitEvents=!1;var o=e.utils.getSingleElement(t.tagName,t.index);return o?("radio"===t.type&&(o.checked=!0),"checkbox"===t.type&&(o.checked=t.checked),"SELECT"===t.tagName&&(o.value=t.value),o):!1}}},{}],12:[function(e,t,n){"use strict";var o=e("./events").manager;n.plugins={scroll:e("./ghostmode.scroll"),clicks:e("./ghostmode.clicks"),forms:e("./ghostmode.forms"),location:e("./ghostmode.location")},n.init=function(e){for(var t in n.plugins)n.plugins[t].init(e,o)}},{"./events":6,"./ghostmode.clicks":7,"./ghostmode.forms":9,"./ghostmode.location":13,"./ghostmode.scroll":14}],13:[function(e,t,n){"use strict";var o="browser:location",r="ghostMode.location";n.canEmitEvents=!0,n.init=function(e){e.socket.on(o,n.socketEvent(e))},n.socketEvent=function(e){return function(t){return e.canSync(t,r)?void(t.path?n.setPath(t.path):n.setUrl(t.url)):!1}},n.setUrl=function(e){window.location=e},n.setPath=function(e){window.location=window.location.protocol+"//"+window.location.host+e}},{}],14:[function(e,t,n){"use strict";var o,r="scroll",i="scroll:element",a="ghostMode.scroll";n.canEmitEvents=!0,n.init=function(e,t){function a(i,a){s[i]&&s[i].length&&"querySelectorAll"in document&&o.forEach(s[i],function(i){var s=document.querySelectorAll(i)||[];o.forEach(s,function(i){var s=o.getElementData(i);s.cacheSelector=s.tagName+":"+s.index,s.map=a,u[s.cacheSelector]=i,t.addEvent(i,r,n.browserEventForElement(e,i,s))})})}o=e.utils;var s=e.options;t.addEvent(window,r,n.browserEvent(e)),e.socket.on(r,n.socketEvent(e));var u={};a("scrollElements",!1),a("scrollElementMapping",!0),e.socket.on(i,n.socketEventForElement(e,u))},n.socketEvent=function(e){return function(t){if(!e.canSync(t,a))return!1;var r=o.getScrollSpace();return n.canEmitEvents=!1,e.options&&e.options.scrollProportionally?window.scrollTo(0,r.y*t.position.proportional):window.scrollTo(0,t.position.raw.y)}},n.socketEventForElement=function(e,t){return function(o){function r(e,n){t[e]&&(t[e].scrollTop=n)}return e.canSync(o,a)?(n.canEmitEvents=!1,o.map?Object.keys(t).forEach(function(e){r(e,o.position)}):void r(o.elem.cacheSelector,o.position)):!1}},n.browserEventForElement=function(e,t,o){return function(){var r=n.canEmitEvents;r&&e.socket.emit(i,{position:t.scrollTop,elem:o,map:o.map}),n.canEmitEvents=!0}},n.browserEvent=function(e){return function(){var t=n.canEmitEvents;t&&e.socket.emit(r,{position:n.getScrollPosition()}),n.canEmitEvents=!0}},n.getScrollPosition=function(){var e=o.getBrowserScrollPosition();return{raw:e,proportional:n.getScrollTopPercentage(e)}},n.getScrollPercentage=function(e,t){var n=t.x/e.x,o=t.y/e.y;return{x:n||0,y:o}},n.getScrollTopPercentage=function(e){var t=o.getScrollSpace(),r=n.getScrollPercentage(t,e);return r.y}},{}],15:[function(e,t,n){"use strict";var o=e("./socket"),r=(e("./client-shims"),e("./notify")),i=e("./code-sync"),a=e("./browser-sync"),s=e("./ghostmode"),u=(e("./emitter"),e("./events"),e("./browser.utils")),c=!1,l=!1;n.init=function(e){c&&e.reloadOnRestart&&u.reloadBrowser();var t=window.___browserSync___||{};if(!t.client){t.client=!0;var n=new a(e);s.init(n),i.init(n),r.init(n),e.notify&&r.flash("Connected to BrowserSync")}l||(o.on("disconnect",function(){e.notify&&r.flash("Disconnected from BrowserSync"),c=!0}),l=!0)},o.on("connection",n.init)},{"./browser-sync":1,"./browser.utils":2,"./client-shims":3,"./code-sync":4,"./emitter":5,"./events":6,"./ghostmode":12,"./ghostmode.clicks":7,"./ghostmode.forms":9,"./ghostmode.forms.input":8,"./ghostmode.forms.submit":10,"./ghostmode.forms.toggles":11,"./ghostmode.location":13,"./ghostmode.scroll":14,"./notify":16,"./socket":17}],16:[function(e,t,n){"use strict";var o,r,i,a=(e("./ghostmode.scroll"),e("./browser.utils")),s={display:"none",padding:"15px",fontFamily:"sans-serif",position:"fixed",fontSize:"0.9em",zIndex:9999,right:0,top:0,borderBottomLeftRadius:"5px",backgroundColor:"#1B2032",margin:0,color:"white",textAlign:"center"};n.init=function(e){r=e.options;var t=s;if(r.notify.styles)if("[object Array]"===Object.prototype.toString.call(r.notify.styles))t=r.notify.styles.join(";");else for(var i in r.notify.styles)r.notify.styles.hasOwnProperty(i)&&(t[i]=r.notify.styles[i]);if(o=document.createElement("DIV"),o.id="__bs_notify__","string"==typeof t)o.style.cssText=t;else for(var a in t)o.style[a]=t[a];var u=n.watchEvent(e);return e.emitter.on("notify",u),e.socket.on("browser:notify",u),o},n.watchEvent=function(e){return function(t){if(e.options.notify){if("string"==typeof t)return n.flash(t);n.flash(t.message,t.timeout)}}},n.getElem=function(){return o},n.flash=function(e,t){var o=n.getElem(),r=a.getBody();return o?(o.innerHTML=e,o.style.display="block",r.appendChild(o),i&&(clearTimeout(i),i=void 0),i=window.setTimeout(function(){o.style.display="none",o.parentNode&&r.removeChild(o)},t||2e3),o):!1}},{"./browser.utils":2,"./ghostmode.scroll":14}],17:[function(e,t,n){"use strict";var o=window.___browserSync___||{};n.socket=o.socket||{emit:function(){},on:function(){}},n.getPath=function(){return window.location.pathname},n.emit=function(e,t){var o=n.socket;o&&o.emit&&(t.url=n.getPath(),o.emit(e,t))},n.on=function(e,t){n.socket.on(e,t)}},{}],18:[function(e,t,n){function o(){u[r]?s.emit("tab:hidden"):s.emit("tab:visible")}var r,i,a=e("./browser.utils"),s=e("./emitter"),u=a.getDocument();"undefined"!=typeof u.hidden?(r="hidden",i="visibilitychange"):"undefined"!=typeof u.mozHidden?(r="mozHidden",i="mozvisibilitychange"):"undefined"!=typeof u.msHidden?(r="msHidden",i="msvisibilitychange"):"undefined"!=typeof u.webkitHidden&&(r="webkitHidden",i="webkitvisibilitychange"),"undefined"==typeof u.addEventListener||"undefined"==typeof u[r]||u.addEventListener(i,o,!1)},{"./browser.utils":2,"./emitter":5}]},{},[15]);